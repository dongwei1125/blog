# Element ç»„ä»¶åº“ä¹Ÿæ”¯æŒæš—é»‘æ¨¡å¼å•¦

![](/js/dark/banner.gif)

## å‰è¨€

&emsp;&emsp;æœ€è¿‘å‚è€ƒäº†`Element Plus`é£æ ¼æ ·å¼ï¼Œä¿®æ”¹äº†`Element`å†…éƒ¨æ ·å¼æºæ–‡ä»¶ï¼Œå¹¶å‘å¸ƒäº†è‡ªå®šä¹‰çš„æš—é»‘ä¸»é¢˜åŒ… [element-theme-darkplus](https://github.com/dongwei1125/theme-dark)ã€‚

&emsp;&emsp;æ•ˆæœé¢„è§ˆ ğŸ‘‰[æˆ³è¿™é‡Œ](https://dongwei1125.github.io/theme-dark/)ã€‚

## èƒŒæ™¯

&emsp;&emsp;;`Vue`ç‰ˆæœ¬ç»å†äº†`2`åˆ°`3`çš„å¤§è¿­ä»£ï¼Œä¸ä¹‹ç›¸å…³çš„ä¸€äº›ç”Ÿæ€ç³»ç»Ÿä¹Ÿå‘ç”Ÿäº†å˜åŒ–å’Œæ”¹åŠ¨ã€‚

&emsp;&emsp;ä¾‹å¦‚ç»„ä»¶åº“ [Element](https://element.eleme.io/#/zh-CN) å‡çº§ä¸ºäº† [Element Plus](https://element-plus.org/zh-CN/)ã€‚

&emsp;&emsp;;`Element Plus`ç›¸è¾ƒäº`Element`ã€‚

- ç»„ä»¶ä¸Šæ–°å¢åŠ äº† [TreeSelect](https://element-plus.org/zh-CN/component/tree-select.html) æ ‘å½¢é€‰æ‹©ã€[Text](https://element-plus.org/zh-CN/component/text.html) æ–‡æœ¬ç­‰
- æ€§èƒ½ä¸Šä¼˜åŒ–äº†ç”¨æˆ·ä½“éªŒï¼Œä¾‹å¦‚è¡¨æ ¼ç»„ä»¶åœ¨å¤§æ•°æ®é‡çš„æƒ…å†µä¸‹æ¸²æŸ“é€Ÿåº¦æ›´å¿«ï¼Œè¾“å…¥æ¡†ç»„ä»¶åœ¨è¾“å…¥å“åº”ä¸Šæ›´åŠ æµç•…ç­‰
- å¼€å‘ä¸Šä¹Ÿæ”¯æŒ`TypeScript`ï¼Œèƒ½ä½“éªŒåˆ°æ›´å¥½çš„ç¼–ç ä¹¦å†™å’Œç±»å‹æ£€æŸ¥
- ä¸»é¢˜ä¸Šç‰¹æ€§æœ€ä½³ï¼Œæ–°å¢äº†æš—é»‘æ¨¡å¼ï¼Œå¯åŠ¨æ€åˆ‡æ¢

&emsp;&emsp;é‚£ä¹ˆä¸ºä»€ä¹ˆ`Element`æ— æ³•æ”¯æŒæš—é»‘æ¨¡å¼å‘¢ï¼ŸåŸå› åŒ…æ‹¬ã€‚

 - `Element`æ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜ï¼Œå´å¿½ç•¥äº†æš—é»‘æ¨¡å¼
 - `Element`åˆ›å»ºåˆ`CSS`æ ·å¼è¡¨ä¸­ [var](https://developer.mozilla.org/zh-CN/docs/Web/CSS/var) æŠ€æœ¯å¹¶æœªæˆä¸ºæ ‡å‡†
 - `Element`å†…éƒ¨æ ·å¼ä¸`scss`å˜é‡å¼ºå…³è”ï¼Œå¾ˆéš¾è¾¾åˆ°åŠ¨æ€åˆ‡æ¢ä¸»é¢˜

&emsp;&emsp;;`GitHub`ä»“åº“ [theme-chalk](https://github.com/ElementUI/theme-chalk) ä¿å­˜äº†`Element`æ ·å¼æºæ–‡ä»¶ï¼Œå…¶ä¸­`src`ç›®å½•ä¸‹æœ‰å¾ˆå¤šçš„`.scss`æ–‡ä»¶ã€‚å¦‚æœæƒ³è¦`Element`å†…éƒ¨æ”¯æŒ`var`å˜é‡ï¼Œå‡ ä¹æ‰€æœ‰çš„`.scss`éƒ½å°†ä¿®æ”¹ï¼Œå¹¶ä¸”è¿˜è¦è¿›è¡Œå…¨é¢æµ‹è¯•ã€‚å¦‚æ­¤åºå¤§çš„å·¥ä½œé‡ï¼Œå¯¹äºä»…å‰©ç¤¾åŒºç»´æŠ¤çš„`Element`æ¥è¯´ï¼Œæ˜¯æ ¹æœ¬ä¸å¯èƒ½çš„ã€‚æ‰€ä»¥åœ¨`Element`åœæ­¢ç»´æŠ¤ä¹‹å‰ï¼Œéƒ½æ²¡æœ‰æ”¯æŒæš—é»‘æ¨¡å¼ã€‚

## æ€è·¯

&emsp;&emsp;ç°åœ¨åŠŸèƒ½å°±åœ¨è¿™é‡Œï¼Œå¦‚ä½•å®ç°å‘¢ï¼Ÿ

&emsp;&emsp;æš—é»‘æ¨¡å¼å®é™…ä¸Šå°±æ˜¯ä¸€å¥—`Element`è‡ªå®šä¹‰ä¸»é¢˜åŒ…ã€‚è€Œå¯¹äºè‡ªå®šä¹‰ä¸»é¢˜ï¼Œæœ€å¥½çœ‹çœ‹å®˜æ–¹æ˜¯å¦æ”¯æŒï¼Œè€Œå®˜ç½‘ä¹Ÿç¡®å®æä¾›äº†è‡ªå®šä¹‰ä¸»é¢˜çš„ [å®è·µæ–¹æ¡ˆ](https://element.eleme.io/#/zh-CN/component/custom-theme)ã€‚ä¸€å…±å››ç§æ–¹æ³•ï¼Œå¯ä»¥è¿›è¡Œä¸åŒç¨‹åº¦çš„æ ·å¼è‡ªå®šä¹‰ã€‚å®é™…ä¸Šå¯æ¦‚æ‹¬ä¸ºä¸¤ç§æ–¹æ³•ï¼Œåˆ†åˆ«ä¸ºæµ…å±‚æ¬¡å’Œæ·±å±‚æ¬¡çš„ä¸»é¢˜å®šåˆ¶ã€‚

### æµ…å±‚æ¬¡

&emsp;&emsp;å³ä½¿ç”¨ [åœ¨çº¿ä¸»é¢˜ç¼–è¾‘å™¨](https://element.eleme.io/#/zh-CN/theme/preview) æˆ–è€… [ä¸»é¢˜ç¼–è¾‘å™¨ Chrome æ’ä»¶](https://chrome.google.com/webstore/detail/element-theme-roller/lifkjlojflekabbmlddfccdkphlelmim)ã€‚

&emsp;&emsp;åŸç†ä¸Šæ˜¯æµè§ˆå™¨ä¿®æ”¹äº†`scss`å˜é‡å€¼ï¼Œåœ¨çº¿æœåŠ¡å®æ—¶æ‰“åŒ…å¹¶è¿”å›æ„å»ºå¥½çš„`CSS`æ ·å¼ä»£ç ã€‚

&emsp;&emsp;å…¶ä¼˜ç‚¹åœ¨äºã€‚

 - äº¤äº’å¼ä¿®æ”¹`Element`å…¨å±€`scss`æ ·å¼å˜é‡
 - å¿«æ·å®æ—¶åœ°é¢„è§ˆä¿®æ”¹åçš„è§†è§‰æ•ˆæœ
 - æ”¯æŒæ ·å¼æ–‡ä»¶åŒ…ä¸Šä¼ ã€ä¿®æ”¹å’Œä¸‹è½½

&emsp;&emsp;ç¼ºç‚¹åœ¨äºã€‚

 - åœ¨çº¿æœåŠ¡è¯·æ±‚è¾ƒæ…¢æˆ–è€…æ ¹æœ¬æ— æ³•è®¿é—®ã€‚å¤§æ¦‚ç‡æŠ¥é”™`Server Error 500`ï¼Œå½“ç„¶ä¹Ÿèƒ½è®¿é—®ï¼Œæ³¨æ„`æ–¹å¼æ–¹æ³•`å“ˆ
 - éƒ¨åˆ†æ–‡ä»¶æˆ–ç»„ä»¶å†…éƒ¨é¢œè‰²å€¼å›ºå®šï¼Œæ— æ³•ä¿®æ”¹ã€‚ä¾‹å¦‚ [mixins.scss](https://github.com/ElementUI/theme-chalk/blob/master/src/mixins/mixins.scss#L29)ï¼Œæ»šåŠ¨æ¡æ»‘å—èƒŒæ™¯è‰²`$--scrollbar-thumb-background`å˜é‡å›ºå®šä¸ºäº†`#b4bccc`

### æ·±å±‚æ¬¡

&emsp;&emsp;å³ä½¿ç”¨å‘½ä»¤è¡Œä¸»é¢˜å·¥å…· [element-theme](https://github.com/ElementUI/element-theme) æ­é…`Element`ç™½å©ä¸»é¢˜åŒ… [theme-chalk](https://github.com/ElementUI/theme-chalk) å·¥ä½œã€‚

&emsp;&emsp;åŸç†ä¸Šæ˜¯åœ¨çº¿ä¸»é¢˜ç¼–è¾‘å™¨çš„æœ¬åœ°è¿è¡Œç‰ˆï¼Œä¸€å…±ä¸¤ä¸ªæ­¥éª¤ï¼Œåˆ†åˆ«ä¸ºåˆ›å»ºå˜é‡æ–‡ä»¶å’Œæ‰“åŒ…æ„å»ºã€‚

 - å‘½ä»¤è¡Œè¿è¡Œ`et -i`ï¼Œå·¥å…·`element-theme`å°†æŠ“å–æ–‡ä»¶`node_modules/element-ui/packages/theme-chalk/src/common/var.scss`ï¼Œ`var.scss`å†…ä¿å­˜äº†ç™½å©ä¸»é¢˜å…¨å±€çš„æ ·å¼å˜é‡ã€‚ç„¶åæ‹·è´åˆ°æ ¹ç›®å½•ä¸‹ç”Ÿæˆ`element-variables.scss`å˜é‡åŸºç¡€æ–‡ä»¶
 - å‘½ä»¤è¡Œè¿è¡Œ`et`ï¼Œå·¥å…·`element-theme`åˆ©ç”¨æ„å»ºå·¥å…·`gulp`å’Œç›¸å…³ä¾èµ–ï¼Œæ‰“åŒ…`element-variables.scss`å†…è‡ªå®šä¹‰çš„å˜é‡å€¼åˆ°`src`ç›®å½•ä¸‹è¯¸å¦‚`index.scss`ã€`alert.scss`ç­‰æ–‡ä»¶ä¸­ï¼Œç¼–è¯‘ç”Ÿæˆå¯ä¾›ä½¿ç”¨çš„`index.css`ã€`alert.css`ç­‰ç­‰ï¼Œå…±åŒæ„æˆä¸€ä¸ªä¸»é¢˜åŒ…

&emsp;&emsp;;`element-theme`ç›¸å…³ä¾èµ–é¡¹åŒ…æ‹¬ã€‚

 - [commander](https://github.com/tj/commander.js)ï¼šå¯æ„å»º`node`çš„å‘½ä»¤è¡Œç¨‹åºï¼Œæä¾›äº†å‘½ä»¤è¡Œè¾“å…¥å’Œå‚æ•°è§£æç­‰åŠŸèƒ½
 - [ora](https://github.com/sindresorhus/ora)ï¼šå‘½ä»¤è¡Œ`loading`åŠ è½½æ•ˆæœæ’ä»¶
 - [gulp](https://github.com/gulpjs/gulp)ï¼šæµçš„è‡ªåŠ¨åŒ–ä»£ç æ„å»ºç³»ç»Ÿ
 - [gulp-autoprefixer](https://github.com/sindresorhus/gulp-autoprefixer)ï¼šä¸º`CSS`æ–‡ä»¶æ·»åŠ æµè§ˆå™¨å‰ç¼€ï¼Œä»¥å…¼å®¹ä¸åŒæµè§ˆå™¨
 - [gulp-cssmin](https://www.npmjs.com/package/gulp-cssmin)ï¼šå‹ç¼©`CSS`
 - [gulp-sass](https://github.com/dlmanning/gulp-sass)ï¼š`SASS`ç¼–è¯‘
 - [run-sequence](https://github.com/teambition/gulp-sequence)ï¼š`gulp`å¤šä»»åŠ¡æŒ‰æ¬¡åºæ‰§è¡Œ

&emsp;&emsp;å…¶ä¼˜ç‚¹åœ¨äºã€‚

 - æ”¯æŒæ·±å±‚æ¬¡çš„ä¸»é¢˜å®šåˆ¶
 - é™„åŠ å¯é€‰é…ç½®ï¼Œä¿®æ”¹å˜é‡æ›´åŠ çµæ´»ï¼Œæœ¬åœ°æ„å»ºé€Ÿç‡å¿«æ•ˆç‡é«˜

&emsp;&emsp;ç¼ºç‚¹ä¸»è¦åŒ…æ‹¬ä¸‰ç§ã€‚

&emsp;&emsp;ç¬¬ä¸€`element-theme`å¼ºå…³è”`node`ç‰ˆæœ¬ï¼Œä¾èµ–å…³ç³»ä¸º`element-theme` `>` [gulp-sass 3.1.0](https://github.com/ElementUI/element-theme/blob/master/package.json#L52) `>` [node-sass 4.2.0](https://github.com/dlmanning/gulp-sass/blob/v3.1.0/package.json#L26) `>` `node 12`ã€‚

> `node-sass`ä¸`node`å¯¹åº”ç‰ˆæœ¬å¯å‚è€ƒå®˜æ–¹ [Node version support policy](https://github.com/sass/node-sass#node-version-support-policy)

&emsp;&emsp;ä¸€ç§è§£å†³æ–¹å¼æ˜¯å‡çº§`gulp-sass`ç‰ˆæœ¬æˆ–è€…é™çº§`node`ç‰ˆæœ¬ï¼Œå¦ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨`node`ç‰ˆæœ¬é€‚é…çš„ç¬¬ä¸‰æ–¹åº“ã€‚

 - `node < 12`ï¼š[element-theme](https://www.npmjs.com/package/element-theme)
 - `node = 12.x`ï¼š[element-themex](https://www.npmjs.com/package/element-themex)
 - `node >= 14`ï¼š[element-theme-replace](https://www.npmjs.com/package/element-theme-replace)

&emsp;&emsp;ç¬¬äºŒ`theme-chalk`å†…éƒ¨æ–‡ä»¶ [var.scss](https://github.com/ElementUI/theme-chalk/blob/v2.15.7/src/common/var.scss#L1019) è¯­æ³•é”™è¯¯ï¼Œå¯¼è‡´æ‹·è´ç”Ÿæˆçš„`element-variables.scss`ä¹Ÿæœ‰æ­¤é—®é¢˜ã€‚

```javascript
// src/common/var.scss
...

$--breakpoints-spec: (
  'xs-only' : (max-width: $--sm - 1),
  'sm-and-up' : (min-width: $--sm),
  'sm-only': "(min-width: #{$--sm}) and (max-width: #{$--md - 1})",
  'sm-and-down': (max-width: $--md - 1),
  'md-and-up' : (min-width: $--md),
  'md-only': "(min-width: #{$--md}) and (max-width: #{$--lg - 1})",
  'md-and-down': (max-width: $--lg - 1),
  'lg-and-up' : (min-width: $--lg),
  'lg-only': "(min-width: #{$--lg}) and (max-width: #{$--xl - 1})",
  'lg-and-down': (max-width: $--xl - 1),
  'xl-only' : (min-width: $--xl),
);
```

&emsp;&emsp;æ‰‹åŠ¨ä¿®æ”¹ä¸ºã€‚

```javascript
// src/common/var.scss
...

$--breakpoints-spec: (
  'xs-only' : (max-width: $--sm - 1),
  'sm-and-up' : (min-width: $--sm),
  'sm-only': (min-width: #{$--sm}) and (max-width: #{$--md - 1}),
  'sm-and-down': (max-width: $--md - 1),
  'md-and-up' : (min-width: $--md),
  'md-only': (min-width: #{$--md}) and (max-width: #{$--lg - 1}),
  'md-and-down': (max-width: $--lg - 1),
  'lg-and-up' : (min-width: $--lg),
  'lg-only': (min-width: #{$--lg}) and (max-width: #{$--xl - 1}),
  'lg-and-down': (max-width: $--xl - 1),
  'xl-only' : (min-width: $--xl),
);
```

&emsp;&emsp;ç¬¬ä¸‰`theme-chalk`å†…éƒ¨å˜é‡è¿‡äºå›ºå®šï¼Œä¾‹å¦‚ [mix](https://github.com/ElementUI/theme-chalk/blob/v2.15.7/src/common/var.scss#L25) å‡½æ•°å¼ºåˆ¶æ··åˆ`$--color-white`å˜é‡ï¼Œå¹¶ä¸é€‚ç”¨äºæš—é»‘ä¸»é¢˜ã€‚

```javascript
// src/common/var.scss
...

$--color-primary-light-1: mix($--color-white, $--color-primary, 10%) !default; /* 53a8ff */
```

&emsp;&emsp;å¦å¤–å¾ˆå¤šæ–‡ä»¶ä¸­å­˜åœ¨ç™½å©ä¸»é¢˜å›ºå®šçš„é¢œè‰²å€¼ï¼Œä¾‹å¦‚ [upload.scss](https://github.com/ElementUI/theme-chalk/blob/v2.15.7/src/upload.scss#L32)ã€‚

```javascript
// src/upload.scss
...

@include b(upload) {
  ...

  @include m(picture-card) {
    background-color: #fbfdff;
    border: 1px dashed #c0ccda;
    ...
  }

  ...
}
```

### è‡ªå®šä¹‰

&emsp;&emsp;ä¸¤ç§æ–¹å¼éƒ½æˆ–å¤šæˆ–å°‘æœ‰ç¼ºç‚¹ï¼Œè§£å†³èµ·æ¥ä¹Ÿä¸æ˜¯é‚£ä¹ˆå®¹æ˜“ã€‚

&emsp;&emsp;å®é™…ä¸Šæ·±å±‚æ¬¡å®šåˆ¶æ˜¯æœ‰ä¸€äº›å¯å–çš„éƒ¨åˆ†çš„ï¼Œè§£å†³æ‰é™„å¸¦çš„ç¼ºç‚¹ï¼Œæ˜¯ä¸æ˜¯å°±æ˜¯å¯è¡Œçš„å‘¢ï¼Ÿ

&emsp;&emsp;å‚è€ƒ`element-theme`æˆ‘åšäº†å¦‚ä¸‹å‡ ä¸ªä¿®æ”¹ã€‚

#### ç»´æŠ¤ scss æ–‡ä»¶

&emsp;&emsp;;`theme-chalk`æºæ–‡ä»¶è‡ªèº«å­˜åœ¨è¯­æ³•é”™è¯¯ï¼Œé‚£æ ¹æ®æºæ–‡ä»¶ç”Ÿæˆæ–°æ–‡ä»¶å°±æ¯«æ— æ„ä¹‰äº†ã€‚å¹²è„†çœç•¥`element-theme`åˆ›å»ºå˜é‡æ–‡ä»¶é‚£ä¸€æ­¥ï¼Œæ‹·è´`theme-chalk`çš„æœ€æ–°æºæ–‡ä»¶ [src](https://github.com/ElementUI/theme-chalk/tree/v2.15.7/src) åˆ°æ ¹ç›®å½•ä¸‹ã€‚ç„¶åä¿®å¤è¯­æ³•é”™è¯¯ï¼Œè‡ªè¡Œç»´æŠ¤`src`æºæ–‡ä»¶ã€‚

#### å‡çº§ä¾èµ–é¡¹

&emsp;&emsp;å‡çº§æ‰€æœ‰ä¾èµ–é¡¹ï¼Œå‹ç¼©æ’ä»¶`gulp-cssmin`æ›¿æ¢ä¸º`gulp-clean-css`ï¼Œ`gulp-sass`å†…éƒ¨ä¾èµ–`node-sass`åˆ‡æ¢ä¸º [dart-sass](https://github.com/sass/dart-sass)ï¼Œæ–°å¢äº†`CSS`å‘½åç©ºé—´æ’ä»¶ [gulp-css-wrap](https://github.com/atskimura/gulp-css-wrap)ã€‚

&emsp;&emsp;ä»¥ä¸‹ä»£ç `compileCss`å‡½æ•°é€‰ä¸­äº†`src`ç›®å½•ä¸‹æ‰€æœ‰`.scss`æ–‡ä»¶ï¼Œ`gulp-sass`ç¼–è¯‘æ„å»ºï¼Œç„¶å`gulp-autoprefixer`æ·»åŠ æµè§ˆå™¨å‰ç¼€ï¼Œ`gulp-css-wrap`æ–°å¢ç±»å‘½åç©ºé—´ï¼Œæœ€å`gulp-clean-css`å‹ç¼©ä»£ç ï¼Œè¾“å‡ºè‡³æ ¹ç›®å½•ä¸‹`lib`æ–‡ä»¶å¤¹ä¸­ã€‚

```javascript
// gulpfile.js
...

function compileCss() {
  return src('./src/*.scss')
    .pipe(sass.sync().on('error', sass.logError))
    .pipe(autoprefixer({ cascade: false }))
    .pipe(cssWrap({ selector: '.dark' }))
    .pipe(cleanCss())
    .pipe(dest('./lib'))
}
```

&emsp;&emsp;ä»¥`button`ä¸ºä¾‹ï¼ŒåŸæ ·å¼ä»£ç ä¸ºã€‚

```javascript
.el-button {
  ...
  background: #FFF;
}
```

&emsp;&emsp;æ–°å¢å‘½åç©ºé—´æ ·å¼ä»£ç ä¸ºã€‚

```javascript
.dark .el-button {
  ...
  background: #FFF;
}
```

#### ä¿®æ”¹æºæ–‡ä»¶

&emsp;&emsp;æš—é»‘ä¸»é¢˜é£æ ¼å‚ç…§äº†`Elemenet Plus`ï¼Œä¿®æ”¹`src`ä¸‹æ‰€æœ‰æºæ–‡ä»¶é¢œè‰²å˜é‡å€¼ã€‚å†…éƒ¨å›ºå®šé¢œè‰²å€¼æ›¿æ¢ä¸ºå·²æœ‰å˜é‡ï¼Œæˆ–è€…æ–°å¢å…¨å±€å˜é‡ã€‚

&emsp;&emsp;æ€è·¯è¾ƒç®€å•ï¼Œä½†å·¥ä½œé‡æå¤§ã€‚

#### ç¼–å†™ gulp æ’ä»¶

&emsp;&emsp;è‹¥ä¸€ä¸ªé¡¹ç›®æœ‰ç™½å©å’Œæš—é»‘ä¸¤ç§ä¸»é¢˜ï¼Œä¹Ÿèƒ½åŠ¨æ€åˆ‡æ¢ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ç™½å©çš„éƒ¨åˆ†æ ·å¼ä»£ç ã€‚

```javascript
.el-button {
  display: inline-block;
  line-height: 1;
  white-space: nowrap;
  cursor: pointer;
  background: #FFF;
  border: 1px solid #DCDFE6;
  color: #606266;
  ...
}
```

&emsp;&emsp;ç„¶åçœ‹çœ‹æš—é»‘çš„å¯¹åº”æ ·å¼ä»£ç ã€‚

```javascript
.dark .el-button {
  display: inline-block;
  line-height: 1;
  white-space: nowrap;
  cursor: pointer;
  background: transparent;
  border: 1px solid #4c4d4f;
  color: #cfd3dc;
  ...
}
```

&emsp;&emsp;å‘ç°é—®é¢˜æ²¡æœ‰ï¼Œä¸»é¢˜åˆ‡æ¢åªæ˜¯é¢œè‰²å€¼æ”¹å˜ï¼Œä½†æ˜¯å´é¢å¤–ç»´æŠ¤äº†é‡å¤çš„æ ·å¼ä»£ç ï¼Œæ¯”å¦‚`cursor: pointer`ç­‰ã€‚

&emsp;&emsp;æˆ‘ä»¬å®Œå…¨å¯ä»¥å°†ç™½å©ä¸»é¢˜ä½œä¸ºåŸºç¡€ï¼Œè€Œæš—é»‘éƒ¨åˆ†ä»…ä»…å¼•å…¥é¢œè‰²æ ·å¼å³å¯ã€‚å¯èƒ½åƒå¦‚ä¸‹æ–¹å¼å¼•å…¥ï¼Œ`index.color.css`ä¸­ä»…ä»…åªæœ‰é¢œè‰²ä»£ç ï¼Œæ²¡æœ‰å…¶å®ƒ`CSS`ä»£ç ã€‚

```javascript
import 'element-ui/lib/theme-chalk/index.css';
import 'element-theme-darkplus/lib/index.color.css';
```

&emsp;&emsp;æ–°å¢æ’ä»¶`extract-color`ç”¨äºæŠ½å–æš—é»‘ä¸»é¢˜ä¸­æ‰€æœ‰çš„é¢œè‰²æ ·å¼ä»£ç ï¼Œæ ¸å¿ƒçš„æ ·å¼æå–å‡½æ•°`cssExtractor`å¼•ç”¨äºæ’ä»¶ [webpack-theme-color-replacer](https://github.com/hzsrc/webpack-theme-color-replacer/blob/master/src/CssExtractor.js)ï¼Œ`webpack-theme-color-replacer`å¯æå–å‡º`CSS`ä¸­æŒ‡å®šå…³é”®å­—çš„ä»£ç ã€‚

&emsp;&emsp;;`gulpfile.js`æ–°å¢é¢œè‰²æå–å‡½æ•°`compileColorCss`ï¼Œå…¶ä¸­`rename`ä¸º [gulp-rename](https://github.com/hparra/gulp-rename) æ’ä»¶ï¼Œç”¨äºä¿®æ”¹æ–‡ä»¶åã€‚

```javascript
// gulpfile.js
...

function compileColorCss() {
  return src('./src/*.scss')
    .pipe(sass.sync().on('error', sass.logError))
    .pipe(autoprefixer({ cascade: false }))
    .pipe(cssWrap({ selector: '.dark' }))
    .pipe(extractColor({ keywords: ['#', 'rgb', 'transparent'] }))
    .pipe(cleanCss())
    .pipe(rename({ suffix: '.color' }))
    .pipe(dest('./lib'))
}
```

&emsp;&emsp;ä»¥ä¸Šä»£ç å¤§æ¦‚ç‡æŠ¥é”™ï¼ŒåŸå› æ˜¯`cssWrap()`è¿è¡ŒæŠ¥é”™ï¼Œ`css-wrap`ä¸èƒ½å¤„ç†ç©ºæ–‡ä»¶ã€‚

&emsp;&emsp;æœ¬åœ°æ–°å¢æ’ä»¶`css-wrap`ï¼Œç©ºæ–‡ä»¶è·³è¿‡`css-wrap`å¤„ç†ã€‚

```javascript
// plugins/css-wrap.js
...

function cssWrap(options = {}) {
  return obj((file, _, callback) => {
    ...
    
    var contents = file.contents.toString()

    if (contents) {
      file.contents = new Buffer.from(wrap(contents, options))
    }

    callback(null, file)
  })
}
```

#### æ–°å¢ä¸»é¢˜é¢„è§ˆ

&emsp;&emsp;;`element-theme-darkplus`å†…å¾ˆå¤šé…ç½®æ–‡ä»¶éƒ½æ˜¯ç”¨äºå¼€å‘é˜¶æ®µæ ¼å¼åŒ–`.vue`å’Œ`.js`çš„ï¼Œæ›´å¤š [è¯¦ç»†å‚è€ƒ](eslint-prettier.md)ã€‚

&emsp;&emsp;;`docs/index.html`æ–‡ä»¶ä¸­ä»¥`cdn`æ–¹å¼å¼•å…¥äº† [vue2-sfc-loader](https://github.com/FranckFreiburger/vue3-sfc-loader/blob/main/docs/examples.md#vue2-basic-example)ï¼Œéè„šæ‰‹æ¶é¡µé¢ä¹Ÿèƒ½è§£æ`.vue`æ–‡ä»¶äº†ã€‚

&emsp;&emsp;;`cdn`å¼•å…¥äº†å¤šä¸ªä¾èµ–åŒ…ï¼Œå¯¼è‡´é¦–å±åŠ è½½æ…¢ï¼Œé•¿æ—¶é—´å¤„äºç™½å±çŠ¶æ€ï¼Œè¿™é‡Œå¤ç”¨äº† [Ant Design Pro Vue](https://github.com/vueComponent/ant-design-vue-pro/blob/master/public/index.html) åŠ è½½åŠ¨ç”»æ•ˆæœã€‚

### å°ç»“

&emsp;&emsp;;`element-theme-darkplus`å‚è€ƒäº†`element-theme`è¿›ä¸€æ­¥ä¼˜åŒ–äº†`gulpfile.js`é€»è¾‘éƒ¨åˆ†ï¼Œæ–°å¢äº†`extract-color`é¢œè‰²æå–æ’ä»¶ï¼Œå¯æœ€å°åŒ–å®ç°ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½ã€‚æ‹·è´äº†`theme-chalk`ç™½å©ä¸»é¢˜çš„æºæ–‡ä»¶ï¼Œä¿®å¤äº†é—®é¢˜æ–‡ä»¶è¯­æ³•é”™è¯¯ï¼Œè‡ªä¸»ç»´æŠ¤å…¨å±€å˜é‡ã€‚

## ä¼˜åŒ–

### å…³é”®å­—

&emsp;&emsp;è™½ç„¶`extract-color`æ’ä»¶èƒ½æå–é¢œè‰²ç±»ä»£ç ï¼Œä½†æœ‰ç§æƒ…å†µå´ä¸èƒ½åˆç†æå–å‡ºæ¥ï¼Œä¾‹å¦‚ [menu.scss](https://github.com/ElementUI/theme-chalk/blob/master/src/menu.scss#L53)ã€‚

```javascript
// src/menu.scss
...

@include b(menu) {
  ...

  @include m(horizontal) {
    border-right: none;
  }
}
```

&emsp;&emsp;ä»£ç `border-right: none`ä¸­å¹¶æ²¡æœ‰å…³é”®å­—`#`ã€`rgb`æˆ–è€…`transparent`ï¼Œæ’ä»¶æå–ä¸å‡ºæ¥ä¹Ÿå¾ˆæ­£å¸¸ï¼Œé‚£å¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿ

&emsp;&emsp;æ‹Ÿé‡‡ç”¨å…³é”®å­—æ³¨é‡Šï¼Œä½†`extract-color`æ’ä»¶å¯¹æ³¨é‡Šå¹¶ä¸æ•æ„Ÿï¼Œè¿™é‡Œä½¿ç”¨`var`æ¥æŠ˜ä¸­å¤„ç†ã€‚

```javascript
// src/menu.scss
...

@include b(menu) {
  ...

  @include m(horizontal) {
    --ec-ignore-br: none;

    border-right: var(--ec-ignore-br);
  }
}
```

&emsp;&emsp;å…³é”®å­—æ–°å¢`--ec-ignore`ï¼Œä»¥ä¸Šå˜é‡å’Œ`var`è¯­å¥å‡èƒ½æå–å‡ºæ¥ã€‚

```javascript
extractColor({ keywords: ['--ec-ignore', '#', 'rgb', 'transparent'] })
```

&emsp;&emsp;ä½ å¯èƒ½å‘ç°äº†ç™½å©ä¸»é¢˜å†…éƒ¨å¹¶æœªå¼•å…¥`CSS`å˜é‡ï¼Œå‡ºäºå…¼å®¹æ€§è€ƒè™‘ï¼Œæœ€æ–°ç‰ˆæœ¬å·²å¼ƒç”¨ã€‚åœ¨`cssExtractor`æå–å‡½æ•°ä¸Šæˆ‘åšäº†éƒ¨åˆ†ä¿®æ”¹ï¼Œæ€è·¯æ•ˆä»¿äº† [clean-css](https://github.com/clean-css/clean-css?tab=readme-ov-file#how-to-preserve-a-comment-block) çš„ç‰¹æ®Šæ³¨é‡Šã€‚åŸç†å³åœ¨åŒ¹é…åˆ°ç‰¹æ®Šæ³¨é‡Š`/* extract-color ignore */`æ—¶ï¼Œ`CSS`ä»£ç æ®µä»ç„¶ä¿ç•™è€Œä¸ä»…é™äºé¢œè‰²å€¼ï¼Œè¡ç”Ÿå‡ºäº†`ignoreSpecialComments`é…ç½®é¡¹ï¼ˆé»˜è®¤å€¼`false`ï¼‰ã€‚

```javascript
extractColor({ keywords: ['#', 'rgb', 'transparent'], ignoreSpecialComments: false })
```

### çº§è”é€‰æ‹©å™¨

&emsp;&emsp;;`cascader`çº§è”é€‰æ‹©å™¨ç¨³å®šå¤ç°å›¾æ ‡å¤–ç°çš„é—®é¢˜ã€‚

![](/js/dark/cascader.png)

&emsp;&emsp;;`checkbox`æ–°å¢`overflow: hidden`å¯è§£å†³ï¼Œä½†å¯èƒ½ä¼šäº§ç”Ÿå…¶å®ƒçš„é—®é¢˜ï¼Œæš‚æ—¶ä¸è§£å†³ã€‚

```javascript
.el-checkbox__inner {
  ...
  overflow: hidden;
}
```

### è¿›åº¦æ¡/è¯„åˆ†

&emsp;&emsp;è¯„åˆ†ç»„ä»¶ [Rate](https://github.com/ElemeFE/element/blob/master/packages/rate/src/main.vue) è¾ƒä¸ºç‰¹æ®Šï¼Œ`Element`å†…éƒ¨ä¸é¢œè‰²ç›¸å…³`props`å‡å®šä¹‰äº†é»˜è®¤å€¼ï¼Œä¸”`template`æ¨¡æ¿ä¸­éƒ½é‡‡ç”¨å†…è”æ ·å¼ï¼Œå¯¼è‡´å¤–éƒ¨ä¸»é¢˜æ ·å¼æ— æ³•è¦†ç›–ã€‚

| `Props` | `é»˜è®¤å€¼` |
| --- | -- |
| `void-color` | `#c6d1de` |
| `disabled-void-color` | `#eff2f7` |
| `text-color` | `#1f2d3d` |

&emsp;&emsp;å¯ä¼ ç©ºå€¼é‡ç½®ç›¸åº”`props`å€¼ä½¿ä¸»é¢˜ç”Ÿæ•ˆã€‚

```html
<el-rate :value="3" show-text void-color="" text-color="" />
```

&emsp;&emsp;è¿›åº¦æ¡ç»„ä»¶ [Progress](https://github.com/ElemeFE/element/blob/master/packages/progress/src/progress.vue) ç±»ä¼¼ï¼Œä»…çº¿å½¢è¿›åº¦æ¡æ”¯æŒï¼Œç¯å½¢å’Œä»ªè¡¨ç›˜å½¢ä¸æ”¯æŒã€‚

| `Props` | `é»˜è®¤å€¼` |
| --- | --- |
| `define-back-color` | `#ebeef5` |
| `text-color` | `#606266` |

```html
<el-progress :percentage="20" define-back-color="" text-color="" />
```

&emsp;&emsp;è™½ç„¶ä¸¤ç»„ä»¶å¯ä»¥ä¼ ç©ºå€¼é‡ç½®å±æ€§ä»¥æ”¯æŒæš—é»‘ä¸»é¢˜ï¼Œè€Œå¯¹äºä¸å…³å¿ƒæ­¤åŠŸèƒ½çš„åŒå­¦ï¼Œå´ä¸æ¸…æ¥šä¸ºä»€ä¹ˆä¼šä¼ å…¥è¯¸å¦‚`text-color=""`è¿™æ ·çš„å±æ€§ï¼Œè¿™æ— ç–‘åœ¨å¼€å‘å±‚é¢å¾’å¢äº†å¿ƒæ™ºè´Ÿæ‹…ã€‚

&emsp;&emsp;å—¯`...`æ ·å¼ä¹ˆæ³•è§£å†³`Rate`å’Œ`Progress`æ ¹æœ¬æ€§é—®é¢˜äº†ã€‚

&emsp;&emsp;é‡æ–°å®šä¹‰`Rate`å’Œ`Progress`ç»„ä»¶å¯ä»¥å—ï¼Ÿè¿˜ä¸èƒ½ç ´ååŸç»„ä»¶çš„æ‹“å±•æ€§å’Œå”¯ä¸€æ€§ï¼Œåˆ™é‡‡ç”¨ç»§æ‰¿åŸå§‹ç»„ä»¶å¹¶åœ¨`javascript`é‡Œåšäº†ä¸€ä¸ªä¸­é—´å±‚ï¼Œå¸®åŠ©ç”¨æˆ·åˆå§‹ç½®ç©ºç›¸å…³é¢œè‰²`props`ã€‚

```javascript
import ElementUI from 'element-ui'
import Darken from 'element-theme-darkplus/utils/darken'

Vue.use(ElementUI)
Vue.use(Darken(ElementUI))
```

##  ğŸ‰ å†™åœ¨æœ€å

ğŸ»ä¼™ä¼´ä»¬ï¼Œå¦‚æœä½ å·²ç»çœ‹åˆ°äº†è¿™é‡Œï¼Œè§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©åˆ°ä½ çš„è¯ä¸å¦¨ç‚¹èµğŸ‘æˆ– [Star](https://github.com/dongwei1125/blog) âœ¨æ”¯æŒä¸€ä¸‹å“¦ï¼

æ‰‹åŠ¨ç å­—ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæŒ‡æ­£ğŸ’¬~

ä½ çš„æ”¯æŒå°±æ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›ğŸ’ª~

[GitHub](https://github.com/dongwei1125) / [Gitee](https://gitee.com/dongwei1125)ã€[GitHub Pages](https://dongwei1125.github.io/)ã€[æ˜é‡‘](https://juejin.cn/user/2621689331987783)ã€[CSDN](https://blog.csdn.net/Don_GW) åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ˜‰~