# vue è´­ç‰© WebApp

![](/app/web-app/banner.jpg)

## é¡¹ç›®æ¦‚è¿°

### ç®€ä»‹

&emsp;&emsp;é¡¹ç›®å [è˜‘è‡è´­](https://github.com/dongwei1125/mogugou)ï¼Œä¸ä¸€èˆ¬è´­ç‰©`WebApp`ç±»ä¼¼ï¼ŒåŒ…æ‹¬é¦–é¡µã€åˆ†ç±»ã€è´­ç‰©è½¦ã€ä¸ªäººä¸­å¿ƒã€è¯¦æƒ…ã€‚

&emsp;&emsp;é¡¹ç›®åŸºäº`vue`ã€`vue-router`ã€`vue-cli3`ï¼Œ`api`è¯·æ±‚ç›¸å…³éƒ¨åˆ†é‡‡ç”¨`axios`ï¼Œæ•°æ®éƒ¨åˆ†å¹¶éæ¥è‡ªæœåŠ¡å™¨ï¼Œè€Œæ˜¯æœ¬åœ°åŸºäº`express`å¯åŠ¨ç›¸å…³æ•°æ®æœåŠ¡ã€‚åŸå› ä¸€æ˜¯ç½‘ç»œæ¥å£æ›´æ–°å¿«ã€æ•°æ®å˜åŒ–å¤§ã€ä¾èµ–æ€§é«˜ï¼ŒäºŒæ˜¯é¡¹ç›®æœ¬èº«ä¸å¤§ï¼ŒåŸºäºé¡¹ç›®å¯åŠ¨æœ¬æœºæœåŠ¡çµæ´»æ€§è¾ƒé«˜ï¼Œä»£ç å®‰è£…ä¾èµ–å³å¯è¿è¡Œï¼Œæ•…æœ€ç»ˆè€ƒè™‘`express`çˆ¬å–ç›¸å…³æ¥å£æ•°æ®ä¿å­˜æœ¬åœ°ã€‚

&emsp;&emsp;çŠ¶æ€ç®¡ç†æœªä½¿ç”¨`vuex`ï¼Œä»…ä»…æ˜¯å°‘éƒ¨åˆ†ä½¿ç”¨`vuex`åŠŸèƒ½æ˜¾å¾—å¤šä½™ï¼Œé¡¹ç›®å¤§æ‰å®Œå…¨æœ‰å¿…è¦ã€‚åŸºäº`vue.observable`èƒ½å®ç°éƒ¨åˆ†`vuex`åŠŸèƒ½ã€‚å›¾ç‰‡åŠ è½½éƒ¨åˆ†å¼‚æ­¥æ›´æ–°`DOM`é‡‡ç”¨äº‹ä»¶æ€»çº¿è¿›è¡Œç»„ä»¶é€šè®¯ã€‚

&emsp;&emsp;é¡¹ç›®ç¬¬ä¸‰æ–¹å¼€æºç»„ä»¶åŒ…æ‹¬`better-scroll`æ»šåŠ¨æ’ä»¶ã€`vue-awesome-swiper`å’Œ`swiper`è½®æ’­ç»„ä»¶ã€`normalize.css`åˆå§‹åŒ–æ ·å¼ã€`vue-lazyload`æ‡’åŠ è½½ã€ç§»åŠ¨ç«¯`click300ms`å»¶æ—¶é‡‡ç”¨`fastclick`ã€‚

&emsp;&emsp;é¡¹ç›®éš¾åº¦ä¸é«˜ï¼Œé€‚åˆæ–°æ‰‹ç»ƒæ‰‹ï¼Œæ­¤ç¯‡ä»…æ˜¯ç»ƒä¹ ç»„ä»¶åŒ–å°è£…å’Œç›®å½•é…ç½®çš„ç›¸å…³è®°å½•ã€‚

### é¢„è§ˆåœ°å€

&emsp;&emsp;;[è˜‘è‡è´­](http://dongwei1125.github.io/mogugou)

### ç¤ºä¾‹å›¾

![](/app/web-app/index.gif)

![](/app/web-app/detail.gif)

![](/app/web-app/menu.gif)

### æ–‡ä»¶ç›®å½•é…ç½®

```javascript
â”œâ”€â”€ public
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â”œâ”€â”€ index.html
â”œâ”€â”€ server
â”‚   â”œâ”€â”€ static
â”‚   â”‚   â”œâ”€â”€ image
â”‚   â”œâ”€â”€ app.js
â”‚   â”œâ”€â”€ db.js
â”‚   â”œâ”€â”€ router.js
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ api
â”‚   â”‚   â”œâ”€â”€ home.js
â”‚   â”‚   â”œâ”€â”€ category.js
â”‚   â”œâ”€â”€ assets
â”‚   â”‚   â”œâ”€â”€ iconfont
â”‚   â”‚   â”œâ”€â”€ img
â”‚   â”‚   â”œâ”€â”€ placeholder.png
â”‚   â”œâ”€â”€ components
â”‚   â”‚   â”œâ”€â”€ BetterScroll
â”‚   â”‚   â”œâ”€â”€ CheckButton
â”‚   â”‚   â”œâ”€â”€ IndexBar
â”‚   â”‚   â”œâ”€â”€ Message
â”‚   â”‚   â”‚   â”œâ”€â”€ Message.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”œâ”€â”€ Navbar
â”‚   â”‚   â”œâ”€â”€ Swiper
â”‚   â”‚   â”œâ”€â”€ SwiperSlide
â”‚   â”‚   â”œâ”€â”€ Tabbar
â”‚   â”‚   â”œâ”€â”€ TabbarItem
â”‚   â”œâ”€â”€ layout
â”‚   â”‚   â”œâ”€â”€ Tabbar
â”‚   â”œâ”€â”€ router
â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”œâ”€â”€ routes.js
â”‚   â”œâ”€â”€ store
â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”œâ”€â”€ vuex.js
â”‚   â”œâ”€â”€ styles
â”‚   â”‚   â”œâ”€â”€ index.less
â”‚   â”œâ”€â”€ utils
â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”œâ”€â”€ request.js
â”‚   â”œâ”€â”€ views
â”‚   â”‚   â”œâ”€â”€ home
â”‚   â”‚   â”œâ”€â”€ category
â”‚   â”‚   â”œâ”€â”€ cart
â”‚   â”‚   â”œâ”€â”€ profile
â”‚   â”‚   â”œâ”€â”€ detail
â”‚   â”œâ”€â”€ App.vue
â”‚   â”œâ”€â”€ main.js
â”‚   â”œâ”€â”€ .env.development
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ vue.config.js
```

## åˆå§‹åŒ–

### è„šæ‰‹æ¶åˆå§‹åŒ–

&emsp;&emsp;åˆå§‹ç©ºè„šæ‰‹æ¶`vue-cli3`ä»…é…ç½®`Babel`ã€`Router`ã€`CSS Pre-processors`ï¼ˆ`less`ï¼‰ï¼Œåˆ é™¤å…¶ä½™ä¸šåŠ¡ä¸ç›¸å…³éƒ¨åˆ†ï¼Œæ–‡ä»¶å¤¹éƒ¨åˆ†é€šè¿‡éœ€æ±‚é€æ­¥æ–°å»ºã€‚

### Tabbar ç»„ä»¶ã€è·¯ç”±

&emsp;&emsp;é¡¹ç›®ç›®å‰æ­£å¸¸è¿è¡Œä¸ºç©ºç™½ï¼Œå…ˆæ­å»ºè·¯ç”±ç›¸å…³éƒ¨åˆ†ï¼ŒæŠ½ç¦»`routes`é™æ€æ•°æ®ï¼ŒåŒçº§ç›®å½•ä¸‹æ–°å¢`routes.js`å¯¼å‡ºé™æ€æ•°æ®ï¼Œ`index.js`å¼•å…¥é™æ€æ•°æ®ã€‚

```javascript
// router -> index.js
import Vue from 'vue'
import VueRouter from 'vue-router'
import routes from './routes'

Vue.use(VueRouter)

const router = new VueRouter({
  mode: 'history',
  routes
})

export default router

// router -> routes.js
export default [{
        path: '/',
        redirect: '/home'
    },
    {
        path: '/home',
        name: 'home',
        component: () => import('views/home')
    }
    ...
]
```

&emsp;&emsp;é¡¹ç›®å¯åŠ¨ï¼Œä¼šå‘ç”Ÿè·¯ç”±è·¯å¾„åŠ è½½é”™è¯¯ï¼Œéœ€è¦é…ç½®æ–‡ä»¶å¤¹åˆ«åï¼Œç©ºè„šæ‰‹æ¶ä¸å«`vue.config.js`ï¼Œéœ€è¦æ‰‹åŠ¨æ–°å¢ã€‚è·¯å¾„`src/views`ä¿®æ”¹åˆ«å`views`ï¼Œå…¶ä½™åˆ«ååç»­ä¼šç”¨åˆ°ï¼Œå…¨éƒ¨é…ç½®ã€‚

```javascript
// vue.config.js
const path = require('path')

function resolve(dir) {
    return path.join(__dirname, dir)
}

module.exports = {
    chainWebpack: (config) => {
        config.resolve.alias
            .set('@', resolve('src'))
            .set('views', resolve('src/views'))
            ...
    }
}
```

&emsp;&emsp;æ–‡ä»¶å¤¹åˆ«åé…ç½®åï¼Œæ‡’åŠ è½½è·¯å¾„ä¸‹å¹¶æ²¡æœ‰æ–‡ä»¶ã€‚`views`æ–°å¢`home`æ–‡ä»¶å¤¹ï¼Œå…¶ä¸‹æ–°å¢`index.vue`ï¼Œå…¶ä½™æ–‡ä»¶åŒç†ï¼Œé‡å¯è¿è¡Œã€‚

&emsp;&emsp;æ­¤æ—¶é¡¹ç›®ä¾æ—§ç©ºç™½ï¼Œä½†æ˜¯`home`ä¸‹`index.vue`å·²è¢«é‡å®šå‘ï¼Œæ¥ä¸‹æ¥å°è£…`Tabbar`ï¼Œ`Tabbar`è¾ƒä¸ºå…¬å…±ï¼Œ`components`ä¸‹æ–°å»º`Tabbar`ã€`TabbarItem`ï¼Œæ–‡ä»¶å¤¹ä¸‹å‡æ–°å¢`index.vue`ã€‚`Tabbar`ä¸€èˆ¬é«˜åº¦`49px`æœ€ä¸ºèˆ’é€‚ï¼ŒåŒæ—¶å®šä½å±å¹•åº•éƒ¨ï¼Œå±‚çº§é«˜äºå…¶ä»–ç»„ä»¶ã€‚`TabbarItem`å†…éƒ¨å¼•å…¥`router-link`ï¼Œç»„ä»¶æ¥æ”¶å‚æ•°å‚è€ƒ [vant-ui](https://vant-contrib.gitee.io/vant/#/zh-CN/tabbar) å¹¶åšäº†éƒ¨åˆ†ä¿®æ”¹ï¼Œé€šè¿‡å½“å‰`routes.path`å‚æ•°å’Œè®¡ç®—å±æ€§é…ç½®é«˜äº®ã€‚

```javascript
// Tabbar -> index.vue
<div class="tabbar">
  <slot />
</div>

// TabbarItem -> index.vue
<div class="tabbar-item">
    <router-link :to="to" tag="div">
      <div
        class="tabbar-item-icon"
        :style="{ color: to === path ? activeColor : inactiveColor }"
      >
        <slot name="icon" />
      </div>
      <div
        class="tabbar-item-text"
        :style="{ color: to === path ? activeColor : inactiveColor }"
      >
        <slot name="text" />
      </div>
    </router-link>
</div>

export default {
  props: {
    to: String,
    activeColor: String,
    inactiveColor: String
  },
  computed: {
    path() {
      return this.$route.path
    }
  }
}
```

&emsp;&emsp;å…¬å…±ç»„ä»¶`Tabbar`å°è£…å®Œæˆï¼Œé¡¹ç›®ç›¸å…³`Tabbar`è¿˜æœªå°è£…åŠå¼•ç”¨ã€‚ç”±äºé¡¹ç›®ç›¸å…³`Tabbar`æœ‰å…³äºé¡¹ç›®é¡µé¢å¸ƒå±€ã€‚æ•…`src`ä¸‹æ–°å¢`layout`æ–‡ä»¶å¤¹ï¼Œç›¸å…³å¸ƒå±€ç»„ä»¶ä¸ä¼šå¤ªå¤šï¼Œä¸ç”¨æ–‡ä»¶å¤¹ä¸‹å†æ”¾`index.vue`å½¢å¼ã€‚

```javascript
// layout -> Tabbar.vue
<m-tabbar>
      <m-tabbar-item to="/home" active-color="#ff8198" inactive-color="#555555">
        <i slot="icon" class="iconfont icon-home"></i>
        <span slot="text">é¦–é¡µ</span>
      </m-tabbar-item>
      ...
</m-tabbar>

import Tabbar from "components/Tabbar"
import TabbarItem from "components/TabbarItem"

export default {
  components: {
    MTabbar: Tabbar,
    MTabbarItem: TabbarItem
}
```

&emsp;&emsp;å›¾æ ‡é‡‡ç”¨ [iconfont](https://www.iconfont.cn/)ï¼Œå®˜ç½‘é€‰æ‹©åˆé€‚çš„`Tabbar`å›¾æ ‡ï¼Œä¸‹è½½å‹ç¼©åŒ…è§£å‹ã€‚`assets`æ–‡ä»¶å¤¹ä¸‹æ–°å»º`iconfont`æ–‡ä»¶å¤¹ï¼Œå¼•å…¥è§£å‹çš„å…¨éƒ¨æ–‡ä»¶ã€‚å…¶ä¸­`demo_index.html`å…³äºå­—ä½“å›¾æ ‡ä½¿ç”¨æ–¹å¼åšäº†è¯¦ç»†é˜è¿°ï¼Œ`iconfont.css`éœ€è¦æ‰‹åŠ¨å¼•å…¥ï¼Œ`iconfont`ä¹Ÿæ˜¯ä¸€ç§å­—ä½“ï¼Œæœ€ç»ˆå½’ç»“ä¸º`css`æ ·å¼ã€‚`src`ä¸‹æ–°å»º`styles`æ–‡ä»¶å¤¹ï¼Œåˆ›å»º`index.less`ï¼Œ`index.less`æ”¾ç½®å…¬å…±åˆå§‹åŒ–æ ·å¼ï¼Œ`main.js`æœ€ç»ˆå¼•å…¥`index.less`ã€‚

```javascript
â”œâ”€â”€ iconfont
â”‚   â”œâ”€â”€ demo_index.html
â”‚   â”œâ”€â”€ demo.css
â”‚   â”œâ”€â”€ iconfont.css
...

// index.less
@import '~assets/iconfont/iconfont.css'

// main.js
import 'styles/index.less'
```

&emsp;&emsp;;`Tabbar`ä¸šåŠ¡ç»„ä»¶å°è£…å®Œæˆï¼Œ`App.vue`å¼•å…¥ï¼Œé¡¹ç›®è¿è¡Œä¸‹`Tabbar`å±•ç¤ºå±å¹•åº•éƒ¨ï¼Œç‚¹å‡»`Tabbar`å‘ç”Ÿè·¯ç”±è·³è½¬å’Œ`URL`æ›´æ–°ã€‚

```javascript
// App.vue
<div id="app">
  <tabbar />
  <router-view />
</div>

import Tabbar from "layout/Tabbar"

export default {
  components: { Tabbar }
}
```

### æ ·å¼ã€é¡µé¢æ ‡é¢˜ã€å›¾æ ‡åˆå§‹åŒ–

&emsp;&emsp;è·¯ç”±é‡å®šå‘è‡³`home`é¡µé¢ï¼Œå‘ç°`body`å­˜åœ¨`margin`ï¼Œå®‰è£…`normalize.css`ï¼Œ`mian.js`å¼•å…¥ã€‚

```javascript
// å®‰è£…
cnpm i normalize.css --save

// main.js
import 'normalize.css'
```

&emsp;&emsp;;`styles`æ–‡ä»¶å¤¹ä¸‹`index.less`ï¼Œåˆå§‹åŒ–`html`ã€`body`ã€`#app`é«˜åº¦ï¼Œåˆ é™¤`App.vue`ç›¸å…³æ ·å¼ã€‚

```javascript
html,
body,
#app {
    height: 100%;
}
```

&emsp;&emsp;è·¯ç”±æ·»åŠ å¯¼èˆªå®ˆå«`router.beforeEach`ï¼Œç”¨äºåˆå§‹åŒ–é¡µé¢æ ‡é¢˜ï¼Œä½†æ˜¯ç›®æ ‡è·¯ç”±`to`å¹¶ä¸å«æœ‰`meta.title`ï¼Œä¿®æ”¹`routes.js`ï¼Œå…¶ä½™åŒç†ï¼Œæ­£ç¡®è¿è¡Œé¡µé¢æ ‡é¢˜åˆ‡æ¢ã€‚æ›¿æ¢`public`ä¸‹`favicon.ico`ï¼Œé¡¹ç›®åˆ·æ–°æ˜¾ç¤ºå›¾æ ‡ã€‚

```javascript
// router -> index.js
router.beforeEach((to, from, next) => {
  document.title = to.meta.title
  next()
})

// router -> routes.js
{
  path: '/home',
  name: 'home',
  meta: {
     title: 'é¦–é¡µ'
  },
  component: () => import('views/home')
},
```

### NavBar

&emsp;&emsp;;`NavBar`ä¹Ÿæ˜¯ä¸€èˆ¬è¾ƒé€šç”¨ç»„ä»¶ï¼Œ`components`æ–°å»º`NavBar`ï¼Œç»„ä»¶å¼€æ”¾æ’æ§½ï¼Œä¸€èˆ¬é«˜åº¦`44px`æœ€ä¸ºèˆ’é€‚ï¼Œè·¯ç”±é¡µé¢ã€è¯¦æƒ…å‡ä½¿ç”¨ï¼Œç»„ä»¶ä¼ å€¼`background-color`ã€‚`home`é¡µå¼•å…¥ï¼Œé¡µé¢å¼•å…¥ç»„ä»¶é¡ºåºéµå¾ªå¼•å…¥å…¬å…±ç»„ä»¶ã€å®šåˆ¶ç»„ä»¶ã€å…¬å…±`js`ã€å®šåˆ¶`js`ã€‚

## æ•°æ®æœåŠ¡

### Express

&emsp;&emsp;é¡¹ç›®ç›®å‰å¯å®ç°è·¯ç”±è·³è½¬ï¼Œç›¸å…³`api`ä»¥åŠæ•°æ®è¿˜æœªå‡†å¤‡ã€‚ç½‘ç»œæ¥å£å¸¸æ›´æ–°ã€æ•°æ®ä¸ç¨³å®šï¼Œé‡‡ç”¨`express`ã€`superagent`çˆ¬å–ä¿å­˜æ¥å£æ•°æ®ï¼Œçˆ¬è™«`crawler`å‚è€ƒå…¶ä»–æ–‡ç« ã€‚å¤§è‡´æ‹†åˆ†é¡¹ç›®éœ€è¦ç”¨åˆ°çš„åç«¯æ¥å£ï¼Œé¦–é¡µè½®æ’­å›¾ã€ç‰¹è‰²ã€æ¨èã€è¯¦æƒ…ã€åˆ—è¡¨ã€åˆ†ç±»ç­‰ï¼Œé¡¹ç›®æ–°å»º`serve`æ–‡ä»¶å¤¹ã€‚`image`ä¿å­˜æ•°æ®å›¾ç‰‡ã€‚

```javascript
â”œâ”€â”€ serve
â”‚   â”œâ”€â”€ static
â”‚   â”‚   â”œâ”€â”€ image
â”‚   â”œâ”€â”€ app.js
â”‚   â”œâ”€â”€ db.js
â”‚   â”œâ”€â”€ router.js
```

&emsp;&emsp;;`app.js`å¯åŠ¨æ•°æ®æœåŠ¡ï¼Œå¼€æ”¾é™æ€`static`æ–‡ä»¶å¤¹ï¼Œæ˜ å°„`/static`åˆ°`serve/static`ã€‚

```javascript
app.use("/static/", express.static("./serve/static/"))
```

&emsp;&emsp;;`db.js`æœ¬åœ°æ•°æ®åº“ï¼Œ`baseURL`ä¸ºæœ¬æœºå±€åŸŸç½‘`ip`ï¼Œä¾¿äºç§»åŠ¨ç«¯è®¿é—®æœ¬æœºæ•°æ®ï¼Œä¹Ÿæ–¹ä¾¿è°ƒè¯•ã€‚é¡¹ç›®ä¹‹å‰ä½¿ç”¨`ipconfig`æ‰‹åŠ¨è¾“å…¥çš„æ–¹å¼ï¼Œè¿™ç§æ–¹å¼ä¸å…æ˜¾å¾—ç¹çï¼Œæ•°æ®æœåŠ¡ä¸€å¯åŠ¨ä¾¿ä¸é¡¹ç›®æ²¡æœ‰å®é™…å…³è”æ€§ï¼Œæ²¡æœ‰å¿…è¦å†å»ä¿®æ”¹ä¸€æ¬¡`ip`åœ°å€ã€‚æ•…ä½¿ç”¨`os`æ¨¡å—åŠ¨æ€è·å–æœ¬æœºå±€åŸŸç½‘`ip`ï¼Œå½“ç„¶æ­¤ç§æ–¹å¼å¦‚è‹¥`PC`ç«¯è®¿é—®å›¾ç‰‡å¤±è´¥ï¼Œå¤§æ¦‚ç‡æ˜¯åŠ¨æ€è·å–`ip`éƒ¨åˆ†æœ‰è¯¯ï¼Œæ³¨é‡Šç›¸å…³ä»£ç ï¼Œé€šè¿‡ä¸Šä¸€ç§æ–¹å¼ä¿®æ”¹`ip`å³å¯ã€‚

```javascript
const os = require("os")

const interfaces = os.networkInterfaces()

const port = 3000

var baseURL = "http://127.0.0.1:3000"

for (const key of Object.keys(interfaces)) {
  const el = interfaces[key].find(el => el.family === "IPv4" && el.address !== "127.0.0.1")

  el && (baseURL = `http://${el.address}:${port}`)
}
```

&emsp;&emsp;;`router.js`åç«¯è·¯ç”±éƒ¨åˆ†ï¼Œç”±äºä¸šåŠ¡ç›¸å…³æ¥å£ä¸æ˜¯ç‰¹åˆ«å¤šï¼Œä¸ç”¨`router`å†å»åˆ†çº§ï¼Œä¹Ÿä¸å­˜åœ¨`post`ç›¸å…³è¯·æ±‚ï¼Œä¸éœ€è¦é¢å¤–å®‰è£…`body-parser`ã€‚

```javascript
const db = require('./db')

router.get('/api/getBann', function (req, res) {
    res.send({
        message: "success",
        result: db.banner,
        status: "0",
        success: true
    })
})
...
```

&emsp;&emsp;;`package.json`é…ç½®å¿«é€Ÿå¯åŠ¨å‘½ä»¤ã€‚

```javascript
// å®‰è£…
cnpm i nodemon --save-dev

scripts: {
    serve: "nodemon serve/app.js"
}
```

### axiosã€api å°è£…

&emsp;&emsp;é¡¹ç›®ä½¿ç”¨`axios`ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œå®‰è£…æ­¥éª¤å‚è€ƒ [axios](http://www.axios-js.com/)ã€‚

```javascript
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ api
â”‚   â”‚   â”œâ”€â”€ home.js
â”‚   â”œâ”€â”€ utils
â”‚   â”‚   â”œâ”€â”€ request.js
â”œâ”€â”€ .env.development
â”œâ”€â”€ vue.config.js
```

&emsp;&emsp;;`request.js`å†…`baseURL`ç‹¬ç«‹å‡ºæ¥ï¼Œä½¿ç”¨ç¯å¢ƒå˜é‡ï¼Œæ”¾ç½®`utils`å·¥å…·ç±»å‡½æ•°æ–‡ä»¶å¤¹ä¸‹ã€‚

```javascript
const server = axios.create({
  baseURL: process.env.VUE_APP_BASE_API,
  timeout: 5000,
})
```

&emsp;&emsp;å¼€å‘ä¸äº§å“`URL`ä¸€èˆ¬ä¸ä¸€è‡´ï¼Œé€šå¸¸æ˜¯é…ç½®ç¯å¢ƒå˜é‡ï¼Œæ ¹ç›®å½•åˆ›å»º`.env.development`æ–‡ä»¶ï¼ŒåæœŸéœ€è¦æ·»åŠ `.env.production`é…ç½®äº§å“ç¯å¢ƒå˜é‡ã€‚

```javascript
VUE_APP_BASE_API = "/api"
```

&emsp;&emsp;é¡¹ç›®ä¸‹å°è¯•è®¿é—®`express`è¯·æ±‚é€šå¸¸æƒ…å†µä¼šå‘ç”Ÿè·¨åŸŸæŠ¥é”™ï¼ŒæœåŠ¡ç«¯å¯è®¾ç½®è·¨åŸŸéƒ¨åˆ†ï¼Œæˆ–è€…é¡¹ç›®è®¾ç½®ä»£ç†ã€‚

```javascript
// vue.config.js
devServer: {
  port: 8000,
  proxy: {
     [process.env.VUE_APP_BASE_API]: {
         target: 'http://127.0.0.1:3000/',
         ws: false,
         changeOrigin: true,
         pathRewrite: {
             ['^' + process.env.VUE_APP_BASE_API]: ''
        }
     }
  },
}
```

&emsp;&emsp;å¼•å…¥`request.js`ï¼Œè®¾ç½®è¯·æ±‚`url`ã€è¯·æ±‚æ–¹å¼ï¼Œé¡µé¢å¼•ç”¨ã€‚

```javascript
// api.js => home.js
import request from 'utils/request'

export function getBann() {
    return request({
        url: '/api/getBann',
        method: 'get'
    })
}

// å¼•ç”¨é¡µé¢
import { getBann } from "api/home"

getBann()
  .then((res) => {...})
  .catch((err) => {...})
```

## BetterScrollã€vue-awesome-swiper

&emsp;&emsp;é¡¹ç›®æ¶‰åŠç¬¬ä¸‰æ–¹ç»„ä»¶ä¸»è¦æ˜¯`BetterScroll`ã€`vue-awesome-swiper`ï¼Œ`BetterScroll`ä¹Ÿæ˜¯å…¬å…±ç»„ä»¶ï¼Œ`components`æ–°å»º`BetterScroll`æ–‡ä»¶å¤¹ï¼Œè¯¦ç»†æ­¥éª¤å‚è€ƒ [better-scroll](https://github.com/ustbhuangyi/better-scroll/blob/master/README_zh-CN.md)ã€‚`swiper`ä¹Ÿæ˜¯è¾ƒä¸ºå…¬å…±çš„ç»„ä»¶ï¼Œ`components`æ–°å»º`Swiper`ã€`SwiperSlide`ï¼Œ`vue-awesome-swiper`ç‰ˆæœ¬é€ æˆçš„å‘æ¯”è¾ƒå¤šï¼Œä¸»è¦ç”±äº`vue-awesome-swiper`ä¸`swiper`çš„ç‰ˆæœ¬ä¸é€‚åº”é€ æˆï¼Œå»ºè®®ä½¿ç”¨`4.1.1`å’Œ`5.2.0`ï¼Œè¯¦ç»†æ­¥éª¤å‚è€ƒ [vue-awesome-swiper](https://github.com/surmon-china/vue-awesome-swiper)ã€‚

## é¡µé¢

### é¦–é¡µ

&emsp;&emsp;ç›®å‰åŸºç¡€æ¶å­åŸºæœ¬æ­å»ºå®Œæˆï¼Œ`vuex`çŠ¶æ€ç®¡ç†éƒ¨åˆ†æš‚ä¸è€ƒè™‘ï¼Œå®é™…ç”¨åˆ°çš„æ—¶å€™è‡ªç„¶å¸¦å…¥ã€‚é¦–é¡µç»„ä»¶å·²å«æœ‰`NavBar`ï¼Œè°ƒæ•´é¦–é¡µç›®å½•ç»“æ„ï¼Œç»„ä»¶å‘½åå°½é‡è¯­ä¹‰åŒ–ï¼ŒåæœŸç»´æŠ¤éå¸¸æ–¹ä¾¿ã€‚

```javascript
â”œâ”€â”€ home
â”‚   â”œâ”€â”€ index.vue
â”‚   â”œâ”€â”€ components
â”‚   â”‚   â”œâ”€â”€ RecommendView.vue
â”‚   â”‚   â”œâ”€â”€ FeatureView.vue
â”‚   â”‚   â”œâ”€â”€ CardList.vue
â”‚   â”‚   â”œâ”€â”€ CardListItem.vue
```

&emsp;&emsp;é¦–é¡µç»„ä»¶æ ‘ç»“æ„ï¼Œæµè§ˆå™¨å®‰è£…`devtools`å·¥å…·éå¸¸ç›´è§‚ã€‚

```javascript
â–¼<Home>
    <NavBar>
    â–¼<BetterScroll>
         â–¼<Swiper>
             <SwiperSlide>
         <RecommendView>
         <FeatureView>
         <IndexBar>
        â–¼<CardList>
            <CardListItem>
```

&emsp;&emsp;;`NavBar`é»˜è®¤`fiexed`å®šä½å±å¹•é¡¶éƒ¨ï¼Œä¼šå¯¼è‡´é®ä½`better-scroll`ï¼Œ`home`ä½¿ç”¨ä¼ªå…ƒç´ `before`è§„é¿ã€‚ä¸”`better-scroll`å¤–å±‚`wrapper`éœ€è¦æŒ‡å®šé«˜åº¦ï¼Œå°½é‡åŠ ä¸Šç›¸å¯¹å®šä½ã€‚

```javascript
// styles -> index.less
.m-home::before{
    content: '';
    display: block;
    height: 44px;
    width: 100%;
}

// home -> index.vue
.scroll {
  height: calc(100vh - 93px);
  overflow: hidden;
  position: relative;
}
```

&emsp;&emsp;è½®æ’­å›¾è·å–ç­‰æ•°æ®æ¥å£ï¼Œé¡µé¢è°ƒç”¨éƒ½éœ€è¦`api`æ–‡ä»¶å¤¹æ–‡ä»¶å£°æ˜æ¥å£å†å¼•å…¥ã€‚

```javascript
// api -> home.js
export function getRecom() {
    return request(...)
}

// home -> index.vue
import { getBann } from "api/home"
```

&emsp;&emsp;;`IndexBar`ä¹Ÿæ˜¯å…¬å…±ç»„ä»¶ï¼Œ`components`æ–°å»º`IndexBar`ï¼Œç»„ä»¶å‚æ•°ä¼ é€’æ•°ç»„ï¼Œå­˜åœ¨é«˜äº®åˆ‡æ¢å’Œç‚¹å‡»äº‹ä»¶çš„æŠ›å‡ºï¼ŒåŒæ—¶å«é»˜è®¤é«˜äº®ï¼Œåˆ™å°†`IndexBar`å°è£…`v-model`å½¢å¼ã€‚`props`å¢åŠ ç»„ä»¶å¯å¤ç”¨æ€§ï¼Œä¸ä»…ä»…åªä¾èµ–äº`data`å†…æ•°æ®`label-value`å¯¹å½¢å¼ï¼Œä¼ é€’`props`å¯ä¾èµ–å¤šç§å½¢å¼ã€‚`model`ã€`props.data`æ˜¯å°è£…è‡ªå®šä¹‰ç»„ä»¶`v-model`å¿…å¤‡ï¼Œå…·ä½“æ­¥éª¤å‚è€ƒå®˜æ–¹ [v-model](https://cn.vuejs.org/v2/guide/components-custom-events.html#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E7%9A%84-v-model)ï¼Œ`index-bar-item`ç‚¹å‡»è°ƒç”¨`change`ï¼Œå®ç°`v-model`ã€‚

```javascript
// IndexBar -> index.vue
<div
  class="index-bar-item"
  :class="{ active: value === item[props.value] }"
  @click="itemClick(item)"
  v-for="item in data"
  :key="item[props.value]"
>...</div>

export default {
  props: {
    data: {
      type: Array,
      default: () => [],
    },
    value: {},
    props: {
      type: Object,
      default: () => ({
        label: "label",
        value: "value",
      }),
    },
  },
  model: {
    value: "value",
    event: "change",
  },
  methods: {
    itemClick(item) {
      item[this.props.value] !== this.value &&
        this.$emit("change", item[this.props.value])
    },
  }
}

// home -> index.vue
<index-bar
  :data="indexBars"
  v-model="currentBar"
  @change="onChange"
/>

data:{
    indexBars: [
        {
          label: "æµè¡Œ",
          value: "0"
        }
        ...
    ],
    currentBar: "0"
}
```

&emsp;&emsp;åˆ—è¡¨æ•°æ®æ¥å£ï¼Œä¼ é€’å‚æ•°åŒ…æ‹¬ç‚¹å‡»`currentType`ã€`pageNum`ã€`pageSize`ã€‚å›¾ç‰‡å¼‚æ­¥åŠ è½½å¿…ç„¶å¯¼è‡´`better-scroll`é«˜åº¦è®¡ç®—å¤±è¯¯ï¼Œæ¯å¼ å›¾ç‰‡åŠ è½½å®Œæ¯•éƒ½è¦é‡æ–°è®¡ç®—é«˜åº¦æ‰åˆç†ï¼Œæ•…`CardListItem`å†…å›¾ç‰‡`load`å®Œæ¯•éœ€è¦æŠ›å‡ºç»™é¦–é¡µï¼Œå†è°ƒç”¨`scroll`ç»„ä»¶å†…`refresh`æ–¹æ³•ã€‚é¦–é¡µä¸`CardListItem`ç»„ä»¶ä¹‹é—´çš„å…³ç³»è–„å¼±ï¼Œæˆ–è€…è¯´æ²¡æœ‰å…³ç³»ï¼Œç»„ä»¶é—´äº‹ä»¶é€šä¿¡å¯é‡‡ç”¨`EventBus`äº‹ä»¶æ€»çº¿çš„æ–¹å¼ã€‚

```javascript
// mian.js
Vue.prototype.$bus = new Vue()

// CardListItem å‘å‡º
onLoad(){
  this.$bus.$emit('imageLoad')
}

// home -> index.vue ç›‘å¬
this.$bus.$on("imageLoad", () => {
   this.$refs.scroll.refresh()
})
```

&emsp;&emsp;ä½†æ˜¯å¯¹äºå›¾ç‰‡è¾ƒå¤šçš„åˆ—è¡¨ï¼Œä¼šå¯¼è‡´è°ƒç”¨`refresh`æ–¹æ³•é¢‘ç¹ï¼Œéœ€è¦æ·»åŠ é˜²æŠ–å‡½æ•°ã€‚`utils`ä¸‹`index.js`ï¼Œ`timer`ä½œä¸ºäº†é—­åŒ…å‡½æ•°`debounce`çš„ç§æœ‰å˜é‡ï¼Œé¦–é¡µå¼•å…¥å‡½æ•°`debounce`ã€‚

```javascript
export function debounce(func, delay = 20) {
  var timer = null
  return function(...arg) {
    if (timer) clearTimeout(timer)

    timer = setTimeout(() => {
      func.apply(this, arg)
    }, delay)
  }
}
```

&emsp;&emsp;å½“ç»„ä»¶`scroll`å®ä¾‹å®Œå…¨åˆ›å»ºå®Œæ¯•æ‰æœ‰å¿…è¦ç”Ÿæˆé˜²æŠ–å‡½æ•°ï¼Œå®ä¾‹æœªåˆ›å»ºå®Œæ¯•`$ref.scroll.refresh`ä¸å­˜åœ¨ï¼Œç”Ÿæˆçš„é˜²æŠ–å‡½æ•°å®é™…ä¹Ÿä¸ç”Ÿæ•ˆï¼ŒçŸ­è·¯è¿ç®—`&&`æ›´åŠ ä¿è¯`refresh`éå‡½æ•°åˆ™ä¸æ‰§è¡Œã€‚å¦‚æ­¤`fresh`å°±æ˜¯ä¸€ä¸ªä¿å­˜æœ‰ç§æœ‰å˜é‡`timer`çš„é˜²æŠ–å‡½æ•°ï¼Œå›¾ç‰‡åŠ è½½å°äº`20ms`åªæ‰§è¡Œæœ€åä¸€æ¬¡ã€‚

```javascript
// home -> index.vue
<scroll @load='onLoad'>

onLoad() {
   this.refresh = debounce(this.$refs.scroll.refresh, 20)
}

mounted() {
    this.$bus.$on("imageLoad", () => {
      this.refresh && this.refresh()
    })
}
```

&emsp;&emsp;;`indexBar`å¸é¡¶ï¼Œé€šè¿‡ä½¿`better-scroll`ä¸‹çš„`InddexBar` `fixed`å®šä½ä¸å¯å–ï¼Œ`better-scroll`ä½¿ç”¨`translate`ä¼šå¯¼è‡´å†…éƒ¨å®šä½å…ƒç´ éç†æƒ³çŠ¶æ€ï¼Œè§£å†³åŠæ³•æœ€å¥½æ˜¯`NavBar`åŒçº§å†æ·»åŠ ç»„ä»¶`IndexBar` `fixed`å®šä½ï¼Œ`scroll`æœªåˆ°å¸é¡¶è·ç¦»éšè—ï¼Œå¸é¡¶è·ç¦»åˆ™æ˜¾ç¤ºã€‚`showTop`ç”¨äºè¿”å›é¡¶éƒ¨ï¼Œæ»šåŠ¨è·ç¦»é«˜äºä¸€å±åˆ™æ˜¾ç¤ºè¿”å›é¡¶éƒ¨æŒ‰é’®ã€‚

```javascript
// home -> index.vue
scroll({ y }) {
  this.$nextTick(() => {
    this.showSticky =
    this.$refs.indexBar && -y > this.$refs.indexBar.$el.offsetTop
  })

  this.showTop = -y > document.body.clientHeight
}
```

&emsp;&emsp;ä¸Šæ‹‰åŠ è½½ã€ä¸‹æ‹‰åˆ·æ–°ã€`IndexBar`åˆ‡æ¢ï¼Œä¸‹æ‹‰é‡æ–°è°ƒç”¨æ¥å£ï¼Œä¸Šæ‹‰å½“å‰`pageNum++`ï¼Œå†è·å–æ•°æ®ï¼Œ`list`æ•°æ®ä½¿ç”¨`concat`æ‹¼æ¥ï¼Œæˆ–è€…ä½¿ç”¨`push(...array)`æ–¹å¼ï¼Œ`indexBar`åˆ‡æ¢é‡æ–°è·å–æ•°æ®ï¼Œ`scroll`æ»šåŠ¨è‡³`IndexBar`ä½ç½®ã€‚

```javascript
this.$nextTick(() => {
  this.showSticky &&
    this.$refs.scroll.scrollTo(0, -this.$refs.indexBar.$el.offsetTop, 0)
})
```

&emsp;&emsp;é¦–é¡µéœ€è¦`keep-active`ç¼“å­˜ï¼Œä¿å­˜é¡µé¢çŠ¶æ€ã€‚

```javascript
// App.vue
<keep-alive>
  <router-view />
</keep-alive>
```

### è¯¦æƒ…

&emsp;&emsp;è·¯ç”±`routes.js`æ–°å¢è¯¦æƒ…è·¯ç”±ã€‚

```javascript
// router -> routes.js
{
     path: '/detail/:id',
     name: 'detail',
     meta: {
         title: 'è¯¦æƒ…'
     },
     component: () => import('views/detail')
}

// home -> index.vue
this.$router.push({ path: `/detail/${id}` })
```

&emsp;&emsp;ç›®å½•ç»“æ„ã€‚

```javascript
â”œâ”€â”€ Detail
â”‚   â”œâ”€â”€ index.vue
â”‚   â”œâ”€â”€ components
â”‚   â”‚   â”œâ”€â”€ GoodsInfo.vue
â”‚   â”‚   â”œâ”€â”€ StoreInfo.vue
â”‚   â”‚   â”œâ”€â”€ ClothList.vue
â”‚   â”‚   â”œâ”€â”€ ParamsInfo.vue
â”‚   â”‚   â”œâ”€â”€ CommentList.vue
â”‚   â”‚   â”œâ”€â”€ RecommendList.vue
â”‚   â”‚   â”œâ”€â”€ NavBar.vue
â”‚   â”‚   â”œâ”€â”€ SubmitBar.vue
```

&emsp;&emsp;ç»„ä»¶æ ‘ç»“æ„ã€‚

```javascript
â–¼<Detail>
    <NavBar>
    â–¼<BetterScroll>
        â–¼<Swiper>
            <SwiperSlide>
        <GoodsInfo>
        <StoreInfo>
        <ClothList>
        <ParamsInfo>
       <CommentList>
       <RecommendList>
    <SubmitBar>
```

&emsp;&emsp;ç»„ä»¶å¤§è‡´åŒé¦–é¡µä¸€è‡´ï¼Œ`NavBar`å·®åˆ«è¾ƒå¤§ï¼Œ`NavBar`å¯¹å…¬å…±ç»„ä»¶çš„`NavBar`è¿›è¡Œå°è£…ï¼Œç»„ä»¶è‡ªå®šä¹‰`v-model`ï¼ŒæŠ›å‡º`change`äº‹ä»¶ï¼Œç‚¹å‡»å®ç°ç±»ä¼¼é”šç‚¹çš„åŠŸèƒ½ï¼ŒåŒæ—¶ä¼´éšé«˜äº®ã€‚å¤§è‡´åŸç†ç‚¹å‡»è·å–å…ƒç´ çš„`value`å€¼ï¼Œ`value`å€¼æŸ¥è¯¢`navbars`å¯¹åº”çš„`refName`ï¼Œè·å–å¯¹åº”ç»„ä»¶çš„`offsetTop`å®ç°é”šç‚¹ã€‚

```javascript
navbars: [
  {
    label: "å•†å“",
    value: "0",
    refName: "swiper"
  }
]

this.$refs.scroll.scrollTo(0, -this.$refs[refName].$el.offsetTop)
```

&emsp;&emsp;;`scroll`æ»šåŠ¨è¿‡ç¨‹ä¸­é«˜äº®ä¼´éšåˆ‡æ¢ï¼Œåœ¨`scroll`äº‹ä»¶ä¸­è·å–æ»šåŠ¨è·ç¦»ï¼Œéå†`navbars`è®¾ç½®`currentBar`çš„å€¼ï¼ŒåŒæ—¶`v-model`åŒå‘ç»‘å®š`currentBar`ï¼Œä»è€Œå®ç°æ»šåŠ¨é«˜äº®ã€‚

```javascript
this.navbars.forEach((el) => {
  if (this.$refs[el.refName] && -y >= this.$refs[el.refName].$el.offsetTop) {
    this.currentBar = el.value
  }
})
```

&emsp;&emsp;æ·»åŠ è´­ç‰©è½¦éœ€è¦`vuex`çŠ¶æ€ç®¡ç†ï¼Œéœ€è¦ç”¨åˆ°çš„éƒ¨åˆ†å®è´¨åªæœ‰è´­ç‰©è½¦çš„å•†å“åˆ—è¡¨ï¼Œæ•…ä½¿ç”¨`vuex`æ˜¾å¾—å¤§æå°ç”¨ï¼Œå†µä¸”ä¸ç”¨`vuex`ä¹Ÿèƒ½å®ç°è¿·ä½ ç‰ˆçŠ¶æ€ç®¡ç†ã€‚ä¸ºäº†ä¿ç•™ä¸`vuex`ä¸€è‡´æ€§ï¼Œ`store`ä¸‹æ–°å¢`index.js`ã€`vuex.js`ï¼Œ`vuex.js`å£°æ˜`Store`ç±»ï¼Œæ„é€ å‡½æ•°é»˜è®¤è§‚å¯Ÿ`state`æ•°æ®ã€‚

```javascript
import Vue from "vue"

class Store {
  constructor({ state, mutations }) {
    Object.assign(this, {
      state: Vue.observable(state || {}),
      mutations,
    })
  }
  commit(type, arg) {
    this.mutations[type](this.state, arg)
  }
}

export default { Store }
```

&emsp;&emsp;;`index.js`ä¸ä¸€èˆ¬çŠ¶æ€ç®¡ç†åŸºæœ¬ä¸€è‡´ã€‚

```javascript
import Vuex from './vuex'

export default new Vuex.Store({
    state: {
        goods: []
    },
    mutations: {
        ADD_GOODS(state, arg) {...},
        ALL_CHECKED(state, val) {...}
    }
})
```

&emsp;&emsp;é¡µé¢å®ç°`this.$store`æ–¹å¼è°ƒç”¨è¿˜è¦å°†å¯¼å‡ºå®ä¾‹æ”¾ç½®åŸå‹ä¸Šï¼Œè‡³æ­¤è¿·ä½ ç‰ˆ`vuex`è°ƒç”¨æ–¹å¼ä¸`vuex`è¶‹äºä¸€è‡´ï¼Œ`actions`ã€`gutters`æš‚æ—¶ç”¨ä¸ä¸Šã€‚

```javascript
import store from "./store"

Vue.prototype.$store = store
```

&emsp;&emsp;æ·»åŠ è´­ç‰©è½¦æŒ‰é’®ç‚¹å‡»ï¼Œè°ƒç”¨`mutations`æ–¹æ³•ã€‚

```javascript
this.$store.commit("ADD_GOODS", {...})
```

&emsp;&emsp;è¯¦æƒ…é¡µé¢ç‚¹å‡»ä¸åŒé¦–é¡µå•†å“ï¼Œåªä¼šè¯·æ±‚åŒä¸€å•†å“ï¼ŒåŸå› `keep-active`ç¼“å­˜äº†å½“å‰è¯¦æƒ…é¡µï¼Œä¸ä¼šå†æ¬¡è§¦å‘`created`ï¼Œè°ƒæ•´`App.vue`ã€‚

```javascript
<keep-alive exclude="detail">
```

&emsp;&emsp;æ­¤æ—¶è¯¦æƒ…é¡µ`Tabbar`è¿˜å­˜åœ¨ï¼Œç±»æ¯”`keep-active`ï¼Œç»„ä»¶ä¼ å€¼`exclude`ã€‚

```javascript
// layout -> Tabbar.vue
export default {
  props: {
    exclude: String,
  },
  computed: {
    show() {
      const excludes = this.exclude.split(",")

      return !excludes.includes(this.$route.name)
    }
  }
}

// App.vue
<tabbar exclude="detail" />
```

&emsp;&emsp;;`Message`æ¶ˆæ¯æç¤ºç»„ä»¶å°è£…ï¼Œæ ¹æ®å¼€æºç»„ä»¶åº“ [element-ui](https://element.eleme.cn/#/zh-CN)ï¼Œå°è£…ä¸€ä¸ªç®€å•ç‰ˆçš„`Message`ï¼Œ`components`ä¸‹æ–°å»º`Message`ï¼Œæ–°å»º`main.vue`ã€`index.js`ï¼Œ`main.vue`å†…éƒ¨`mounted`ä¹‹åï¼Œå›ºå®šå»¶æ—¶å…³é—­`Message`ï¼ŒåŒæ—¶æ‰§è¡Œå…³é—­å›è°ƒã€‚

```javascript
<transition name="fade" v-if="visible">
  <div class="message">{{ message }}</div>
</transition>

export default {
  data() {
    return {
      visible: true,
      message: "",
      duration: 2000,
      onClose: null
    }
  },
  mounted() {
    setTimeout(() => {
      this.visible = false

      this.onClose && this.onClose()
    }, this.duration)
  }
}
```

&emsp;&emsp;;`index.js`å†…éƒ¨å¼•å…¥`Vue`ï¼ŒåŒæ—¶å¼•å…¥ç»„ä»¶`Message`ï¼Œåˆ›å»ºç»„ä»¶æ„é€ å™¨ï¼Œé€šè¿‡`new`æ„é€ å™¨åˆ›å»ºç»„ä»¶å®ä¾‹ï¼Œ`$mount`æŒ‚è½½å½“å‰å®ä¾‹åŒæ—¶æ¸²æŸ“ä¸ºçœŸå®`DOM`ï¼Œå†è¿½åŠ è‡³`body`å†…éƒ¨ï¼Œå¯¹å¤–æŠ›å‡º`install`æ–¹æ³•ã€‚

```javascript
import Vue from "vue"

import main from "./main.vue"

const MessageConstructor = Vue.extend(main)

const Message = function(options) {
  if (typeof options === "string") {
    options = {
      message: options
    }
  }

  const instance = new MessageConstructor({
    data: options
  })

  instance.$mount()

  document.body.appendChild(instance.$el)
}

export default {
  install() {
    Vue.prototype.$message = Message
  }
}
```

&emsp;&emsp;;`main.js`å¼•å…¥ç»„ä»¶ï¼Œ`Vue.use()`è°ƒç”¨å†…éƒ¨`install`æ–¹æ³•ï¼Œ`Message`è¢«ç½®äº`Vue.prototype`ä¸Šã€‚

```javascript
// mian.js
import Message from "components/Message"
Vue.use(Message)

// detail -> index.vue
this.$message("å•†å“æ·»åŠ æˆåŠŸ!")
```

### è´­ç‰©è½¦

&emsp;&emsp;è´­ç‰©è½¦é¡µé¢å•†å“å¤šï¼Œå­˜åœ¨æ»šåŠ¨æƒ…å†µï¼Œä½¿ç”¨`better-scroll`ï¼Œé¡µé¢åˆ—è¡¨ä¾èµ–`store`å†…`state`ã€‚

```javascript
computed: {
   data() {
      return this.$store.state.goods
   }
}
```

&emsp;&emsp;ç›®å½•ç»“æ„ã€‚

```javascript
â”œâ”€â”€ cart
â”‚   â”œâ”€â”€ index.vue
â”‚   â”œâ”€â”€ components
â”‚   â”‚   â”œâ”€â”€ GoodsList.vue
â”‚   â”‚   â”œâ”€â”€ TotalBar.vue
```

&emsp;&emsp;ç»„ä»¶æ ‘ç»“æ„ã€‚

```javascript
â–¼<Cart>
    <NavBar>
    â–¼<BetterScroll>
        â–¼<GoodsList>
            <CheckButton>
    â–¼<TotalBar>
        <CheckButton>
```

&emsp;&emsp;;`CheckButton`å³å…¬å…±é€‰ä¸­æŒ‰é’®ï¼Œ`components`ä¸‹æ–°å»º`CheckButton`ï¼Œå†…éƒ¨å®ç°`v-model`ï¼Œå†…éƒ¨é€šè¿‡åˆ‡æ¢èƒŒæ™¯è‰²å®ç°é€‰ä¸­å’Œå–æ¶ˆï¼Œä¸”å†…éƒ¨ç‚¹å‡»äº‹ä»¶é˜»æ­¢å†’æ³¡ã€‚å¯èƒ½å­˜åœ¨å½“å¤–éƒ¨è°ƒç”¨`CheckButton`æ—¶ï¼Œå¸¦æœ‰`CheckButton`çš„æ•´ä¸ªå¡ç‰‡ç‚¹å‡»åˆ™`CheckButton`å–æ¶ˆæˆ–è€…é€‰ä¸­ï¼Œæ­¤æ—¶ä¿®æ”¹`v-model`ç»‘å®šå€¼å³å¯ã€‚ä½†æ˜¯å½“ç‚¹å‡»`CheckButton`æ—¶ï¼Œç”±äºæœ¬èº«`CheckButton`è¢«ç‚¹å‡»æ—¶ä¼šåˆ‡æ¢ï¼ŒåŠ ä¸Šäº‹ä»¶å†’æ³¡ï¼Œå¤–å±‚å¡ç‰‡ä¹Ÿä¼šè§¦å‘ç‚¹å‡»äº‹ä»¶ï¼Œå†æ¬¡ä¿®æ”¹`v-model`å€¼ï¼Œå‡ºç°é¢„æœŸä¹‹å¤–çš„ç»“æœï¼Œæœ€å¥½çš„åŠæ³•å°±æ˜¯é˜»æ­¢äº‹ä»¶çš„å†’æ³¡ã€‚

```javascript
@click.stop="$emit('change', !value)"
```

&emsp;&emsp;;`TotalBar`å†…éƒ¨è®¡ç®—å±æ€§ä¾èµ–`store`å†…`state`ï¼Œæ ¹æ®`state`å•†å“æ•°é‡åŠ¨æ€è®¡ç®—ä»·æ ¼ã€æ€»é‡ã€‚å…¨é€‰æŒ‰é’®ç‚¹å‡»å•†å“å…¨éƒ¨é€‰ä¸­ï¼Œå†æ¬¡ç‚¹å‡»å…¨éƒ¨å–æ¶ˆã€‚å…¨é€‰ç‚¹å‡»åˆ™è°ƒç”¨`store`ä¸‹`mutations`éå†ä¿®æ”¹å•†å“`checked`å±æ€§ã€‚ä½†æ˜¯ç‚¹å‡»`CheckButton`ï¼Œç”±äºå†…éƒ¨å†’æ³¡çš„é˜»æ­¢ï¼Œè§¦å‘ä¸äº†å¤–éƒ¨ç‚¹å‡»äº‹ä»¶ã€‚æ­¤æ—¶ä¼ªå…ƒç´ `after`å°±åˆèƒ½æ´¾ä¸Šç”¨åœºäº†ï¼Œå®šä½ä¸€ä¸ªç©ºç›’å­åœ¨å…¨é€‰æŒ‰é’®ä¸Šï¼Œç‚¹å‡»äº‹ä»¶çš„è§¦å‘å…ƒç´ ä¸€ç›´æ˜¯è¿™ä¸ª`after`ä¼ªå…ƒç´ ã€‚

```javascript
.check {
    position: relative;

    &::after {
      content: "";
      display: block;
      position: absolute;
      left: 0;
      right: 0;
     top: 0;
     bottom: 0;
   }
}
```

&emsp;&emsp;ç”±äº`keep-active`çš„ç¼“å­˜æœºåˆ¶ï¼Œå¯¼è‡´åˆ—è¡¨æ— æ³•ä¸‹æ‹‰ï¼Œä¸»è¦ç”±äºåˆå§‹æƒ…å†µ`scroll`è®¡ç®—é«˜åº¦é”™è¯¯å¯¼è‡´ã€‚è§£å†³åŠæ³•ä¸€ï¼Œæ·»åŠ `activated`äº‹ä»¶ï¼Œé¡µé¢æ´»åŠ¨æ—¶ï¼Œè°ƒç”¨ç»„ä»¶å†…éƒ¨`refresh`äº‹ä»¶æ›´æ–°é«˜åº¦ã€‚

```javascript
activated(){
    this.$nextTick(()=>{
      this.$refs.scroll.refresh()
    })
}
```

&emsp;&emsp;è§£å†³åŠæ³•äºŒï¼Œ`keep-active`ä¸ç¼“å­˜`cart`é¡µé¢ã€‚

```javascript
<keep-alive exclude="detail,cart">
```

### åˆ†ç±»

&emsp;&emsp;ç›®å½•ç»“æ„ã€‚

```javascript
â”œâ”€â”€ category
â”‚   â”œâ”€â”€ index.vue
â”‚   â”œâ”€â”€ components
â”‚   â”‚   â”œâ”€â”€ CatesList.vue
```

&emsp;&emsp;ç»„ä»¶æ ‘ç»“æ„ã€‚

```javascript
â–¼<Category>
    <NavBar>
    <CatesList>
```

### ä¸ªäººä¿¡æ¯

&emsp;&emsp;ç›®å½•ç»“æ„ã€‚

```javascript
â”œâ”€â”€ profile
â”‚   â”œâ”€â”€ index.vue
â”‚   â”œâ”€â”€ components
â”‚   â”‚   â”œâ”€â”€ UserInfo.vue
â”‚   â”‚   â”œâ”€â”€ CountInfo.vue
â”‚   â”‚   â”œâ”€â”€ OptionList.vue
```

&emsp;&emsp;ç»„ä»¶æ ‘ç»“æ„ã€‚

```javascript
â–¼<Profile>
    <NavBar>
    <UserInfo>
    <CountInfo>
    <OptionList>
```

## ä¼˜åŒ–éƒ¨åˆ†

### å›¾ç‰‡æ‡’åŠ è½½

&emsp;&emsp;é¦–é¡µå•†å“æ‡’åŠ è½½ï¼Œ`assets`æ–‡ä»¶å¤¹æ·»åŠ æ‡’åŠ è½½å¡«å……å›¾ã€‚

```javascript
// å®‰è£…
cnpm i vue-lazyload --save

// main.js
import VueLazyload from "vue-lazyload"
Vue.use(VueLazyload, {
  loading: require('assets/placeholder.png')
})
```

### ç§»åŠ¨ç«¯ç‚¹å‡»

&emsp;&emsp;ç§»åŠ¨ç«¯`300ms`ç‚¹å‡»ã€‚

```javascript
// å®‰è£…
cnpm i fastclick --save

// main.js
import FastClick from 'fastclick'
FastClick.attach(document.body)
```

### px è½¬æ¢ vw

&emsp;&emsp;;`px`è½¬`vw`è§†å£å•ä½ï¼Œç›¸å…³æ’ä»¶ [postcss-px-to-viewport](https://github.com/evrone/postcss-px-to-viewport/blob/master/README_CN.md)ï¼Œæ ¹ç›®å½•éœ€è¦æ–°å»º`postcss.config.js`é…ç½®æ–‡ä»¶ï¼Œç›¸å…³é…ç½®å‚æ•°å®˜æ–¹æ–‡æ¡£å¾ˆè¯¦å°½äº†ï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„å°±æ˜¯`px`å•ä½é¿å…å­˜åœ¨äºè¡Œå†…/å†…è”æ ·å¼ï¼Œ`minPixelValue`æœ€å°è½¬æ¢æ•°å€¼ä¸€èˆ¬ä¸º`1`ï¼Œå¯èƒ½æœ‰éƒ¨åˆ†è¾¹æ¡†éœ€è¦`1px`æ˜¾ç¤ºã€‚

```javascript
// å®‰è£…
cnpm install postcss-px-to-viewport --save-dev

// postcss.config.js
module.exports = {
    plugins: {
        'postcss-px-to-viewport': {
            unitToConvert: 'px',
            viewportWidth: 375,
            unitPrecision: 6,
            propList: ['*'],
            viewportUnit: 'vw',
            fontViewportUnit: 'vw',
            selectorBlackList: [],
            minPixelValue: 1,
            replace: true,
            exclude: undefined,
            include: undefined,
            landscapeUnit: 'vw'
        }
    }
}
```

## windows nginx éƒ¨ç½²

&emsp;&emsp;;[nginx](http://nginx.org/en/download.html) é€‰æ‹©`Stable version`ç¨³å®šç‰ˆ`nginx/Windows-x.xx.x`ï¼Œä¸‹è½½å‹ç¼©åŒ…è§£å‹ï¼Œæ ¹ç›®å½•æ‰§è¡Œå‘½ä»¤å¯åŠ¨`nginx`ã€‚

```javascript
// æŸ¥çœ‹ nginx ç‰ˆæœ¬å·
nginx -v

// å¯åŠ¨
start nginx

// å¼ºåˆ¶åœæ­¢æˆ–å…³é—­ nginx
nginx -s stop

// æ­£å¸¸åœæ­¢æˆ–å…³é—­ nginx ï¼ˆå¤„ç†å®Œæ‰€æœ‰è¯·æ±‚åå†åœæ­¢æœåŠ¡ï¼‰
nginx -s quit

// ä¿®æ”¹é…ç½®åé‡æ–°åŠ è½½
nginx -s reload

// æµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®
nginx -t
```

&emsp;&emsp;æµè§ˆå™¨è¾“å…¥`http://localhost/`ï¼Œæ­£å¸¸è®¿é—®ä¸º`Welcome to nginx!`ï¼Œ`nginx`é»˜è®¤è®¿é—®`html/index.html`ï¼Œå¯ä¿®æ”¹é…ç½®æ–‡ä»¶`conf/nginx.conf`æ›´æ”¹é»˜è®¤è·¯å¾„ï¼Œè¿è¡Œé‡æ–°åŠ è½½å‘½ä»¤ã€‚

```javascript
â”œâ”€â”€ dist
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ ...
â”œâ”€â”€ html
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ 50x.html
...

location / {
   root   dist;
   index  index.html index.htm;
}
```

## åè®°

&emsp;&emsp;é¡¹ç›®åŸºæœ¬æ€è·¯å‡æ¢³ç†å¤§åŠï¼Œéƒ¨åˆ†æ€è·¯å¯èƒ½æœªæåŠï¼Œé¡¹ç›® [Github](https://github.com/dongwei1125/mogugou) å¼€æ”¾ï¼Œå¯ä»¥å…‹éš†æˆ–è€…ä¸‹è½½å‹ç¼©åŒ…ï¼Œä»“åº“å†…å­˜ç¨å¤§ï¼Œå¤§çº¦`464M`ï¼Œå‹ç¼©åŒ…ä¸‹è½½`1`åˆ†é’Ÿå·¦å³ï¼ŒåŸå› ä¸»è¦ç”±äºè„±ç¦»ç½‘ç»œæ¥å£ï¼Œæ•°æ®ä¿å­˜æœ¬åœ°å¯¼è‡´ï¼Œè¯¦ç»†æƒ…å†µå¼€å¤´å·²ç»†è‡´è¯´æ˜ã€‚æ•´ä¸ªé¡¹ç›®éå¸¸é€‚ç”¨æ–°æ‰‹ç»ƒæ‰‹ï¼ŒæœåŠ¡ç«¯æ•°æ®æœåŠ¡åªéœ€è¦`npm run serve`å³å¯å¼€å¯ã€‚

&emsp;&emsp;ç”±äº`express`åŠ¨æ€è·å–æœ¬æœºå†…ç½‘`ip`ï¼Œæ‰€ä»¥å®Œå…¨å¯ä»¥æ‰‹æœºè®¿é—®`cli-service`å¯åŠ¨çš„`Network`åœ°å€ï¼Œå®ç°æ‰‹æœºæµè§ˆå™¨ä¹Ÿå¯é¢„è§ˆçš„æ•ˆæœã€‚

## æ›´æ–°æ—¥å¿—

### 20-11-13 10:31

&emsp;&emsp;å›¾ç‰‡å­˜æ”¾é¡¹ç›®ä¸­é¦–æ¬¡ä¸‹è½½æˆ–å…‹éš†è€—æ—¶å¤ªé•¿ï¼Œ`express`ä¹Ÿæ˜¯è·å–æœ¬æœºå±€åŸŸç½‘`ip`å®ç°ç§»åŠ¨è®¿é—®ï¼Œé¡¹ç›®æ˜¾å¾—æ¯”è¾ƒå†—ä½™ã€‚å€˜è‹¥æœ‰ä¸€ä¸ªå›¾åºŠï¼Œ`express`è´Ÿè´£è¿”å›ä¸åŒå›¾ç‰‡åœ°å€ï¼Œé—®é¢˜ä¼šå¾—åˆ°æ ¹æœ¬ç¨‹åº¦çš„è§£å†³ã€‚äºæ˜¯åˆ©ç”¨`Github`ï¼Œæ‰‹åŠ¨é€ ä¸€ä¸ªå›¾åºŠï¼Œäº†è§£åŸç†ä¸ç”¨ç½‘ä¸Šçš„`PicGo`ä¹Ÿèƒ½å®ç°ã€‚

&emsp;&emsp;å®è´¨å°±æ˜¯å¼€è¾Ÿä¸€ä¸ª`Github`å…¬å¼€ä»“åº“ï¼Œæäº¤å›¾ç‰‡æ–‡ä»¶å³å¯ã€‚ä»“åº“å†…éƒ¨é¢„è§ˆå›¾ç‰‡ï¼Œç‚¹å‡»åŸå§‹æ•°æ®è·å–å›¾ç‰‡åŸå§‹`URL`ï¼Œå›¾ç‰‡æ ¹ç›®å½•ä¸€èˆ¬æ˜¯`https://github.com/ç”¨æˆ·å/ä»“åº“å/raw/master`ï¼Œå‰©ä½™éƒ¨åˆ†åˆ™æ˜¯å›¾ç‰‡åœ¨é¡¹ç›®ä¸­çš„è·¯å¾„ã€‚

> æ³¨æ„`Github`å›¾åºŠä¸å¤ªç¨³å®šï¼Œå›¾ç‰‡ç»å¸¸ä¼šæŒ‚æ‰ï¼ŒåŠ é€Ÿåœ°å€è®¿é—®ä¹Ÿä¼šæŒ‚æ‰ã€‚é¡¹ç›®å†…ç›®å‰ä½¿ç”¨çš„æ˜¯`Gitee`å›¾åºŠï¼Œç›¸å¯¹ä¼šç¨³å®šå¾ˆå¤šã€‚

&emsp;&emsp;åˆ é™¤æ‰åŸé¡¹ç›®åŠ¨æ€è·å–å±€åŸŸç½‘`ip`ï¼Œè°ƒæ•´`baseURL`ï¼Œ`app.js`å†…é™æ€æ–‡ä»¶å…³é—­ï¼Œåˆ é™¤`static`æ–‡ä»¶å¤¹ã€‚å›¾ç‰‡è¯¦æƒ…æ¨èéšæœºæ•°ç”Ÿæˆå¯èƒ½å­˜åœ¨ç›¸åŒæƒ…å†µä¼˜åŒ–ã€‚

### 20-11-30 22:00

&emsp;&emsp;é¡¹ç›®æœ‰äº‘æœåŠ¡å™¨æ˜¯å¯ä»¥å®ç°è®¿é—®å¹¶é¢„è§ˆçš„ï¼Œä½†æ˜¯å°é¡¹ç›®ç»ƒæ‰‹æ²¡æœ‰å¿…è¦ï¼Œ`github`å¼€æ”¾äº†é™æ€ç½‘é¡µé¢„è§ˆåŠŸèƒ½ï¼Œå¯ä»¥è°ƒæ•´éƒ¨åˆ†ä»£ç å®ç°ã€‚`ajax`éƒ¨åˆ†å»æ‰ï¼Œ`api`å†…ä¸å¼•å…¥`request`å·¥å…·å‡½æ•°ï¼Œç›´æ¥å¼•å…¥`serve`ä¸‹`db.js`ï¼Œåˆå¹¶`router.js`å’Œ`api`ä¸‹å‡½æ•°ã€‚

&emsp;&emsp;;`vue.config.js`æ–°å¢`publicPath`ï¼Œç”±äºé™æ€ç½‘é¡µé¢„è§ˆ`history`æ¨¡å¼åˆ·æ–°æŠ¥é”™`404`ï¼Œ`router` `model`åˆ é™¤`history`æ¨¡å¼ï¼Œä½¿ç”¨é»˜è®¤`hash`æ¨¡å¼ï¼Œå¹¶æäº¤åœ¨`noajax`åˆ†æ”¯ã€‚

##  ğŸ‰ å†™åœ¨æœ€å

ğŸ»ä¼™ä¼´ä»¬ï¼Œå¦‚æœä½ å·²ç»çœ‹åˆ°äº†è¿™é‡Œï¼Œè§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©åˆ°ä½ çš„è¯ä¸å¦¨ç‚¹èµğŸ‘æˆ– [Star](https://github.com/dongwei1125/blog) âœ¨æ”¯æŒä¸€ä¸‹å“¦ï¼

æ‰‹åŠ¨ç å­—ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæŒ‡æ­£ğŸ’¬~

ä½ çš„æ”¯æŒå°±æ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›ğŸ’ª~

[GitHub](https://github.com/dongwei1125)ã€[Blog](https://dongwei1125.github.io/)ã€[æ˜é‡‘](https://juejin.cn/user/2621689331987783)ã€[CSDN](https://blog.csdn.net/Don_GW) åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨ğŸ˜‰~